if(!window.cart_schedulerdaysview_loaded){window.ComponentArt_SchedulerDaysView=function(_1){this.ElementID=_1;this.element=document.getElementById(this.get_elementId());if(window.ComponentArt_Atlas){ComponentArt.Web.UI.SchedulerDaysView.initializeBase(this,[this.element]);this.beginUpdate=function(){this._updating=true;};this.endUpdate=function(){this._updating=false;this.Render();};this.get_isUpdating=function(){return this._updating;};this.getDescriptor=function(){return _zF0(this.constructor);};}else{this.beginUpdate=function(){this._updating=true;};this.endUpdate=function(){this._updating=false;this.Render();};this.get_isUpdating=function(){return this._updating;};}this.ClientControlId=this.Id=this.SchedulerDaysViewId=_1;this.AppointmentDisplays=new ComponentArt_AppointmentDisplayCollection(this);this.DateTimeFormatter=new DateTimeFormatter();};ComponentArt_SchedulerDaysView.prototype.GetProperty=function(_2){return this[_2];};ComponentArt_SchedulerDaysView.prototype.SetProperty=function(_3,_4){this[_3]=_4;};window.ComponentArt.Web.UI.SchedulerDaysView=ComponentArt_SchedulerDaysView;ComponentArt_SchedulerDaysView.prototype.PublicProperties=[["Columns",Object],["Rows",Object],["StartDate",Date],["StartTime",Number],["EndDate",Date],["EndTime",Number],["ColumnCssClass",String],["ElementID",String],["AppointmentDisplays",Object,true],["Period",Object,true],["Precision",Number,,true],["PrecisionInUnits",Object,,true],["UsePercentageUnits",Boolean],["Height",Object],["RowHeight",Object],["RowTicks",Number],["RowCssClass",String],["Width",Object],["ColumnWidth",Object],["ColumnCount",Number]];ComponentArt_SchedulerDaysView.prototype.PublicMethods=[["generateMultiDayBackgroundHtml",,String],["render"],["initializeColumnsAndRows"],["initializeColumns"],["initializeRows"],["getStartDateTime"],["getEndDateTime"],["calculateEffectivePrecision"],["usePctX",,Boolean],["usePctY",,Boolean],["columnInUnits",,Object],["columnInTicks",,Number],["getEffectiveColumnCount",Number],["getEffectiveGridWidth",,Object],["getEffectiveColumnWidth",,Object],["calculateEffectiveWidths"],["calculateEffectiveWidths"],["getEffectiveGridHeight",,Object],["getEffectiveRowHeight",,Object],["getEffectiveRowTicks",,Number],["getEffectivePrecisionInTicks",,Number],["getEffectivePrecisionInUnits",,Object]];ComponentArt_SchedulerDaysView.prototype.PublicEvents=[["AppointmentAddOpen"],["AppointmentAddClose"],["AppointmentModifyOpen"],["AppointmentModifyClose"],["Load"]];_zEF(ComponentArt_SchedulerDaysView,"this");if(window.ComponentArt_Atlas){ComponentArt.Web.UI.SchedulerDaysView.registerClass("ComponentArt.Web.UI.SchedulerDaysView",Sys.UI.Control);if(Sys.TypeDescriptor){Sys.TypeDescriptor.addType("componentArtWebUI","schedulerDaysView",ComponentArt.Web.UI.SchedulerDaysView);}}ComponentArt_SchedulerDaysView.prototype.LoadAppointmentLooks=function(_5){this.AppointmentLooks=new ComponentArt_AppointmentLookCollection();for(var i=0;i<_5.length;i++){var _7=new ComponentArt_AppointmentLook();_7.set_parent(this);_7.Properties=_5[i];this.AppointmentLooks.Add(_7);}};ComponentArt_SchedulerDaysView.prototype.LoadProperties=function(_8){if(!_8){_8=[];}this.PropertyStorageArray=_8;for(var i=0;i<_8.length;i++){var _a=_8[i][0];var _b=_8[i][1];switch(_a){case "AppointmentLooksPropertyStorage":this.LoadAppointmentLooks(_b);break;default:this[_a]=_b;break;}}};ComponentArt_SchedulerDaysView.prototype.CalculateEffectiveLookProperties=function(_c){for(var i=0;i<ComponentArt_AppointmentLook.CalculableProperties.length;i++){var _e=ComponentArt_AppointmentLook.CalculableProperties[i];delete _c[_e];delete _c["Focus"+_e];}var _f=_c.AppointmentInstance;for(var i=0;i<ComponentArt_AppointmentLook.CalculableProperties.length;i++){var _e=ComponentArt_AppointmentLook.CalculableProperties[i];var _10=_f.GetProperty(_e);if(_10!=null){_c[_e]=_10;continue;}var _11=_c.LookId;if(_11!=null){var _12=this.AppointmentLooks.GetLookById(_11);if(_12!=null){_10=_12.GetProperty(_e);if(_10!=null){_c[_e]=_10;continue;}}}_c[_e]=this["Appointment"+_e];continue;}for(var i=0;i<ComponentArt_AppointmentLook.CalculableProperties.length;i++){var _e=ComponentArt_AppointmentLook.CalculableProperties[i];var _13="Focus"+_e;var _14=_f.GetProperty(_13);if(_14!=null){_c[_13]=_14;continue;}var _15=_c.FocusLookId;if(_15!=null){var _16=this.AppointmentLooks.GetLookById(_15);if(_16!=null){_14=_16.GetProperty(_e);if(_14!=null){_c[_13]=_14;continue;}}}_14=this["Appointment"+_13];if(_14!=null){_c[_13]=_14;continue;}_c[_13]=_c[_e];continue;}};ComponentArt_SchedulerDaysView.prototype.renderAppointments=function(){var _17=this.get_appointmentDisplays().get_array();var i;for(i=0;i<_17.length;i++){this.destroyAppointmentDisplayElements(_17[i]);}populateAppointmentDisplaysFromAppointmentInstances(this);var _17=this.get_appointmentDisplays().get_array();var _19=[];for(i=0;i<_17.length;i++){var _1a=_17[i].get_appointmentInstance().get_period();_19.push({"id":i,"start":_1a.get_startDateTime().getTime(),"end":_1a.get_endDateTime().getTime()});}var _1b=this.getEffectiveColumnWidth().Value-this.get_columnPaddingLeft().Value-this.get_columnPaddingRight().Value;var _1c=ComponentArt_Scheduler_Tiler.calculateTilePositions(_19,_1b,this.get_appointmentHorizontalSpacing());for(i=0;i<_17.length;i++){_17[i].left=_1c[i].left;_17[i].width=_1c[i].width;}for(i=0;i<_17.length;i++){this.createAppointmentDisplayElements(_17[i]);}};ComponentArt_SchedulerDaysView.prototype.destroyAppointmentDisplayElements=function(_1d){if(_1d.segments){for(var i=0;i<_1d.segments.length;i++){var _1f=document.getElementById(_1d.segments[i].elementID);_1f.parentNode.removeChild(_1f);}}};ComponentArt_SchedulerDaysView.prototype.createAppointmentDisplayElements=function(_20){this.CalculateEffectiveLookProperties(_20);var _21=_20.AppointmentInstance;var _22=_21.get_appointmentID();var _23=this.FocusAppointmentId!=null&&this.FocusAppointmentId==_22;var _24=_23?"Focus":"";_20.segments=_20.generateSegments();var _25=[];for(var j=0;j<_20.segments.length;j++){var _27=_20.segments[j];_25.push("<div");if(this.TabIndex){_25.push(" tabindex=\"");_25.push(this.TabIndex);_25.push("\"");}_25.push(" id=\"");_25.push(_27.elementID);_25.push("\"");if(_20[_24+"CssClass"]!=null){_25.push(" class=\"");_25.push(_20[_24+"CssClass"]);_25.push("\"");}_25.push(" style=\"");_25.push("position:absolute;");_25.push("left:");_25.push(_27.left.toStyleAttributeString());_25.push(";");_25.push("top:");_25.push(_27.top.toStyleAttributeString());_25.push(";");_25.push("width:");_25.push(_27.width.toStyleAttributeString());_25.push(";");if(_27.height){_25.push("height:");_25.push(_27.height.toStyleAttributeString());_25.push(";");}if(_27.bottom){_25.push("bottom:");_25.push(_27.bottom.toStyleAttributeString());_25.push(";");}_25.push("\"");_25.push(">");_27.elements=_27.generateElements();if(!_27.elements.footer||!_27.elements.footer.isEndOfAppointment){_20[_24+"FooterHeight"]=ComponentArt_Unit.parse("0px");}if(_27.elements.header){if(_20[_24+"HeaderClientTemplate"]){_25.push(ComponentArt_InstantiateClientTemplate(_20[_24+"HeaderClientTemplate"],_20,_27.elements.header));}else{_25.push("<div style=\"position:absolute;top:0;line-height:0;");_25.push("left:0;right:0;");if(_20[_24+"HeaderHeight"]){_25.push("height:");_25.push(_20[_24+"HeaderHeight"].toStyleAttributeString());_25.push(";");}if(_27.width){_25.push("width:");_25.push(_27.width.toStyleAttributeString());_25.push(";");}_25.push("\" class=\"");_25.push(_20[_24+"HeaderCssClass"]);_25.push("\"");_25.push(" onmousedown=\"ComponentArt.Web.UI.SchedulerDaysView.resizeAppointmentByStart(event);\"");_25.push("></div>");}}_25.push("<dl");_25.push(" style=\"");_25.push("position:absolute;");_25.push("width:100%;");_25.push("top:");_25.push(_20[_24+"HeaderHeight"].toStyleAttributeString());_25.push(";");_25.push("bottom:");_25.push(_20[_24+"FooterHeight"].toStyleAttributeString());_25.push(";");_25.push("\">");_25.push("<dt");_25.push(" onmousedown=\"var event = arguments[0] ? arguments[0] : window.event; event.cancelBubble = true; event.returnValue = false; return false;\"");_25.push(" class=\"");_25.push(_20[_24+"TitleCssClass"]);_25.push("\">");if(_20[_24+"TitleClientTemplate"]){_25.push(ComponentArt_InstantiateClientTemplate(_20[_24+"TitleClientTemplate"],_20,_27));}else{_25.push(_21.get_title());}_25.push("</dt>");_25.push("<dd");_25.push(" class=\"");_25.push(_20[_24+"DescriptionCssClass"]);_25.push("\">");if(_20[_24+"DescriptionClientTemplate"]){_25.push(ComponentArt_InstantiateClientTemplate(_20[_24+"DescriptionClientTemplate"],_20,_27));}else{_25.push(_21.get_description());}_25.push("</dd>");_25.push("</dl>");if(_27.elements.footer){if(_20[_24+"FooterClientTemplate"]){_25.push(ComponentArt_InstantiateClientTemplate(_20[_24+"FooterClientTemplate"],_20,_27.elements.footer));}else{_25.push("<div style=\"position:absolute;bottom:0;line-height:0;");_25.push("left:0;right:0;");_25.push("width:100%;");if(_20[_24+"FooterHeight"]){_25.push("height:");_25.push(_20[_24+"FooterHeight"].toStyleAttributeString());_25.push(";");}_25.push("\" class=\"");_25.push(_20[_24+"FooterCssClass"]);_25.push("\"");_25.push(" onmousedown=\"ComponentArt.Web.UI.SchedulerDaysView.resizeAppointmentByEnd(event);\"");_25.push("></div>");}}_25.push("</div>");}var _28=document.createElement("div");_28.innerHTML=_25.join("");var _29=document.getElementById(this.get_elementId()+"_appointments");while(_28.firstChild){var _2a=_28.firstChild;_2a.IsSegmentElement=true;_2a.SchedulerViewId=this.ClientControlId;_2a.AppointmentInstanceId=_21.get_appointmentID();_2a.onblur=_2a.onclick=_2a.ondblclick=_2a.onfocus=_2a.onkeydown=_2a.onkeypress=_2a.onkeyup=_2a.onmousedown=_2a.onmouseover=_2a.onmouseup=_2a.onselect=_2a.onselectstart=_2a.ondragstart=ComponentArt_SchedulerDaysView.SegmentElementEvents.handler;_29.appendChild(_2a);}delete _28;};ComponentArt_SchedulerDaysView.eventHandlingDaysViews={};ComponentArt_SchedulerDaysView.onmousedown=function(){var _2b=window.event?window.event:arguments[0];for(daysViewId in ComponentArt_SchedulerDaysView.eventHandlingDaysViews){if(ComponentArt_SchedulerDaysView.eventHandlingDaysViews.hasOwnProperty(daysViewId)){var _2c=ComponentArt_SchedulerDaysView.eventHandlingDaysViews[daysViewId];var _2d=document.getElementById(_2c.get_elementId());var _2e=_2b.target?_2b.target:_2b.srcElement;_2c.isInFocus=ComponentArt_Contains(_2d,_2e);}}};ComponentArt_SchedulerDaysView.onkeydown=function(){var _2f=window.event?window.event:arguments[0];for(daysViewId in ComponentArt_SchedulerDaysView.eventHandlingDaysViews){if(ComponentArt_SchedulerDaysView.eventHandlingDaysViews.hasOwnProperty(daysViewId)){var _30=ComponentArt_SchedulerDaysView.eventHandlingDaysViews[daysViewId];var _31=document.getElementById(_30.get_elementId());var _32=_2f.target?_2f.target:_2f.srcElement;if(_30.isInFocus||ComponentArt_Contains(_31,_32)){var _33=_30.getAppointmentById(_30.FocusAppointmentId);if(_33){ComponentArt_SchedulerDaysView.SegmentElementEvents.keydown(_30,_33,null,_2f);}}}}};ComponentArt_AddEventHandler(document,"mousedown",ComponentArt_SchedulerDaysView.onmousedown);ComponentArt_AddEventHandler(document,"keydown",ComponentArt_SchedulerDaysView.onkeydown);ComponentArt_SchedulerDaysView.prototype.getEffectiveNow=function(){if(this.EffectiveNow===void 0){this.calculateEffectiveNow();}return this.EffectiveNow;};ComponentArt_SchedulerDaysView.prototype.calculateEffectiveNow=function(){this.EffectiveNow=(this.get_now()!=null)?this.get_now():new Date();};ComponentArt_SchedulerDaysView.prototype.getEffectiveColumnCount=ComponentArt_SchedulerDaysView.prototype.getEffectiveDateCount=function(){if(this.EffectiveDateCount===void 0){this.calculateEffectiveDates();}return this.EffectiveDateCount;};ComponentArt_SchedulerDaysView.prototype.getEffectiveStartDate=function(){if(this.EffectiveStartDate===void 0){this.calculateEffectiveDates();}return this.EffectiveStartDate;};ComponentArt_SchedulerDaysView.prototype.getEffectiveEndDate=function(){if(this.EffectiveEndDate===void 0){this.calculateEffectiveDates();}return this.EffectiveEndDate;};ComponentArt_SchedulerDaysView.prototype.calculateEffectiveDates=function(){delete this.EffectiveDateCount;delete this.EffectiveStartDate;delete this.EffectiveEndDate;var _34=0;if(this.get_dateCount()!=null){this.EffectiveDateCount=this.get_dateCount();_34++;}if(this.get_startDate()!=null){this.EffectiveStartDate=this.get_startDate();_34++;}if(this.get_endDate()!=null){this.EffectiveEndDate=this.get_endDate();_34++;}switch(_34){case 3:delete this.EffectiveEndDate;break;case 2:break;case 1:if(this.EffectiveDateCount===void 0){this.EffectiveDateCount=7;}else{this.EffectiveStartDate=ComponentArt_DateOperation.getDateOnly(this.getEffectiveNow());}break;case 0:this.EffectiveDateCount=7;this.EffectiveStartDate=ComponentArt_DateOperation.getDateOnly(this.getEffectiveNow());break;}this.EffectiveDateCount=this.EffectiveDateCount!=null?this.EffectiveDateCount:ComponentArt_DateOperation.ticksToDaysRounded(ComponentArt_DateOperation.subtractDates(this.EffectiveEndDate,this.EffectiveStartDate))+1;this.EffectiveStartDate=this.EffectiveStartDate!=null?this.EffectiveStartDate:ComponentArt_DateOperation.subtractTicksFromDate(this.EffectiveEndDate,this.EffectiveDateCount*ComponentArt_DateOperation.ticksPerUnit.Day);this.EffectiveEndDate=this.EffectiveEndDate!=null?this.EffectiveEndDate:ComponentArt_DateOperation.addTicksToDate(this.EffectiveStartDate,this.EffectiveDateCount*ComponentArt_DateOperation.ticksPerUnit.Day);};ComponentArt_SchedulerDaysView.prototype.getEffectiveDayTime=function(){if(this.EffectiveDayTime===void 0){this.calculateEffectiveTimes();}return this.EffectiveDayTime;};ComponentArt_SchedulerDaysView.prototype.getEffectiveStartTime=function(){if(this.EffectiveStartTime===void 0){this.calculateEffectiveTimes();}return this.EffectiveStartTime;};ComponentArt_SchedulerDaysView.prototype.getEffectiveEndTime=function(){if(this.EffectiveEndTime===void 0){this.calculateEffectiveTimes();}return this.EffectiveEndTime;};ComponentArt_SchedulerDaysView.prototype.calculateEffectiveTimes=function(){delete this.EffectiveDayTime;delete this.EffectiveStartTime;delete this.EffectiveEndTime;var _35=0;if(this.get_dayTime()!=null){this.EffectiveDayTime=this.get_dayTime();_35++;}if(this.get_startTime()!=null){this.EffectiveStartTime=this.get_startTime();_35++;}if(this.get_endTime()!=null){this.EffectiveEndTime=this.get_endTime();_35++;}switch(_35){case 3:delete this.EffectiveEndTime;break;case 2:break;case 1:if(this.EffectiveDayTime===void 0){this.EffectiveDayTime=ComponentArt_DateOperation.ticksPerUnit.Day;}else{this.EffectiveStartTime=0;}break;case 0:this.EffectiveDayTime=ComponentArt_DateOperation.ticksPerUnit.Day;this.EffectiveStartTime=0;break;}this.EffectiveDayTime=this.EffectiveDayTime!=null?this.EffectiveDayTime:this.EffectiveEndTime-this.EffectiveStartTime;this.EffectiveStartTime=this.EffectiveStartTime!=null?this.EffectiveStartTime:this.EffectiveEndTime-this.EffectiveDayTime;this.EffectiveEndTime=this.EffectiveEndTime!=null?this.EffectiveEndTime:this.EffectiveStartTime+this.EffectiveDayTime;while(this.EffectiveStartTime<0){this.EffectiveStartTime+=ComponentArt_DateOperation.ticksPerUnit.Day;}while(this.EffectiveDayTime<=0){this.EffectiveDayTime+=ComponentArt_DateOperation.ticksPerUnit.Day;}this.EffectiveEndTime=this.EffectiveStartTime+this.EffectiveDayTime;};ComponentArt_SchedulerDaysView.prototype.getEffectiveGridWidth=function(){if(this.EffectiveGridWidth===void 0){this.calculateEffectiveGridWidths();}return this.EffectiveGridWidth;};ComponentArt_SchedulerDaysView.prototype.getEffectiveColumnWidth=function(){if(this.EffectiveColumnWidth===void 0){this.calculateEffectiveGridWidths();}return this.EffectiveColumnWidth;};ComponentArt_SchedulerDaysView.prototype.usePctX=function(){if(this.UsePctX===void 0){this.calculateEffectiveGridWidths();}return this.UsePctX;};ComponentArt_SchedulerDaysView.prototype.calculateEffectiveGridWidths=function(){delete this.UsePctX;delete this.EffectiveGridWidth;delete this.EffectiveColumnWidth;var _36=this.getEffectiveDateCount();var _37=this.get_columnWidth();if(_37!=null&&!_37.isEmpty()&&_37.get_type()!="%"){this.UsePctX=false;this.EffectiveColumnWidth=_37;this.EffectiveGridWidth=_37.multiply(_36);}else{var _38=this.get_gridWidth();var _39=window.cart_browser_ie||window.cart_browser_ff;if((_38==null)||_38.isEmpty()||(_38.get_type()=="%")||(this.get_usePercentageUnits()&&_39)){this.UsePctX=true;this.EffectiveColumnWidth=(new ComponentArt_Unit(100,"%")).divide(_36);this.EffectiveGridWidth=(_38==null)?new ComponentArt_Unit():_38;}else{this.UsePctX=false;this.EffectiveColumnWidth=_38.divide(_36);this.EffectiveGridWidth=_38;}}};ComponentArt_SchedulerDaysView.prototype.getEffectiveRowCount=function(){if(this.EffectiveRowCount===void 0){this.calculateEffectiveRowCount();}return this.EffectiveRowCount;};ComponentArt_SchedulerDaysView.prototype.getEffectiveRowTicks=function(){if(this.EffectiveRowTicks===void 0){this.calculateEffectiveRowCount();}return this.EffectiveRowTicks;};ComponentArt_SchedulerDaysView.prototype.calculateEffectiveRowCount=function(){delete this.EffectiveRowCount;delete this.EffectiveRowTicks;if(this.get_rowCount()!=null){this.EffectiveRowCount=this.get_rowCount();this.EffectiveRowTicks=this.getEffectiveDayTime()/this.EffectiveRowCount;}else{this.EffectiveRowTicks=(this.get_rowTicks()!=null)?this.get_rowTicks():ComponentArt_DateOperation.ticksPerUnit.Hour;this.EffectiveRowCount=Math.ceil(this.getEffectiveDayTime()/this.EffectiveRowTicks);}};ComponentArt_SchedulerDaysView.prototype.getEffectiveGridHeight=function(){if(this.EffectiveGridHeight===void 0){this.calculateEffectiveGridHeights();}return this.EffectiveGridHeight;};ComponentArt_SchedulerDaysView.prototype.getEffectiveRowHeight=function(){if(this.EffectiveRowHeight===void 0){this.calculateEffectiveGridHeights();}return this.EffectiveRowHeight;};ComponentArt_SchedulerDaysView.prototype.usePctY=function(){if(this.UsePctY===void 0){this.calculateEffectiveGridHeights();}return this.UsePctY;};ComponentArt_SchedulerDaysView.prototype.calculateEffectiveGridHeights=function(){delete this.UsePctY;delete this.EffectiveGridHeight;delete this.EffectiveRowHeight;var _3a=this.getEffectiveRowCount();var _3b=this.get_rowHeight();if(_3b!=null&&!_3b.isEmpty()&&_3b.get_type()!="%"){this.UsePctY=false;this.EffectiveRowHeight=_3b;this.EffectiveGridHeight=_3b.multiply(_3a);}else{var _3c=this.get_gridHeight();var _3d=window.cart_browser_ie||window.cart_browser_ff;if((_3c==null)||_3c.isEmpty()||(_3c.get_type()=="%")||(this.get_usePercentageUnits()&&_3d)){this.UsePctY=true;this.EffectiveRowHeight=(new ComponentArt_Unit(100,"%")).divide(_3a);this.EffectiveGridHeight=(_3c==null)?new ComponentArt_Unit():_3c;}else{this.UsePctY=false;this.EffectiveRowHeight=_3c.divide(_3a);this.EffectiveGridHeight=_3c;}}};ComponentArt_SchedulerDaysView.prototype.initializeColumns=function(){this.Columns=new ComponentArt_GraphColumnCollection(this);for(var i=0;i<this.getEffectiveColumnCount();i++){this.Columns.Array.push(new ComponentArt_GraphColumn(this.Columns));}};ComponentArt_SchedulerDaysView.prototype.initializeColumnHeaders=function(){this.ColumnHeader=new ComponentArt_ColumnHeader(this);for(var i=0;i<this.getEffectiveColumnCount();i++){this.ColumnHeader.Cells.push(new ComponentArt_ColumnHeaderCell(this.ColumnHeader));}};ComponentArt_SchedulerDaysView.prototype.initializeColumnPositions=function(){var _40=this.get_columns().get_array();var _41=this.getEffectiveColumnWidth();var _42=this.getEffectiveGridWidth();for(var i=0;i<_40.length;i++){var _44=_40[i];var _45=_41.multiply(i);var _46=_41.multiply(i+1);var _47=_46.subtract(_45);_44.set_left(_45);_44.set_width(_47);}_40[_40.length-1].set_width(_42.subtract(_40[_40.length-1].get_left()));};ComponentArt_SchedulerDaysView.prototype.initializeColumnTimes=function(){var _48=this.get_columns().get_array();var _49=this.ColumnHeader.Cells;var _4a=this.getEffectiveStartDate().getTime();var _4b=this.getEffectiveStartTime();var _4c=this.getEffectiveEndTime();for(var i=0;i<_48.length;i++){var _4e=_48[i];var _4f=_49[i];_4f.DateTicks=_4e.DateTicks=_4a+i*ComponentArt_DateOperation.ticksPerUnit.Day;_4e.StartTime=_4e.DateTicks+_4b;_4e.EndTime=_4e.DateTicks+_4c;}};ComponentArt_SchedulerDaysView.prototype.initializeRowPositions=function(){var _50=this.get_rows().get_array();var _51=this.getEffectiveRowHeight();var _52=this.getEffectiveGridHeight();for(var i=0;i<_50.length;i++){var row=_50[i];var _55=_51.multiply(i);var _56=_51.multiply(i+1);var _57=_56.subtract(_55);row.set_top(_55);row.set_height(_57);}_50[_50.length-1].set_height(_52.subtract(_50[_50.length-1].get_top()));};ComponentArt_SchedulerDaysView.prototype.initializeRows=function(){this.Rows=new ComponentArt_GraphRowCollection(this);for(var i=0;i<this.getEffectiveRowCount();i++){this.Rows.Array.push(new ComponentArt_GraphRow(this.Rows));}};ComponentArt_SchedulerDaysView.prototype.initializeRowHeaders=function(){this.RowHeader=new ComponentArt_RowHeader(this);for(var i=0;i<this.getEffectiveRowCount();i++){this.RowHeader.Cells.push(new ComponentArt_RowHeaderCell(this.RowHeader));}};ComponentArt_SchedulerDaysView.prototype.get_precisionInTicks=function(){return this.Precision;};ComponentArt_SchedulerDaysView.prototype.set_precisionInTicks=function(_5a){this.Precision=_5a;delete this.PrecisionInUnits;delete this.EffectivePrecisionInTicks;delete this.EffectivePrecisionInUnits;};ComponentArt_SchedulerDaysView.prototype.get_precisionInUnits=function(){return this.PrecisionInUnits;};ComponentArt_SchedulerDaysView.prototype.set_precisionInUnits=function(_5b){this.PrecisionInUnits=_5b;delete this.Precision;delete this.EffectivePrecisionInTicks;delete this.EffectivePrecisionInUnits;};ComponentArt_SchedulerDaysView.prototype.calculateEffectivePrecision=function(){delete this.EffectivePrecisionInTicks;delete this.EffectivePrecisionInUnits;if(this.get_precisionInUnits()!=null){this.EffectivePrecisionInUnits=this.get_precisionInUnits();this.EffectivePrecisionInTicks=(this.columnInTicks()*this.EffectivePrecisionInUnits.divide(this.columnInUnits()));}else{this.EffectivePrecisionInTicks=((this.get_precisionInTicks()!=null)?this.get_precisionInTicks():ComponentArt_DateOperation.getTimeFromHoursMinutes(0,30));this.EffectivePrecisionInUnits=this.columnInUnits().multiply((this.EffectivePrecisionInTicks/this.columnInTicks()));}};ComponentArt_SchedulerDaysView.prototype.get_effectivePrecisionInTicks=function(){if(this.EffectivePrecisionInTicks==null){this.calculateEffectivePrecision();}return this.EffectivePrecisionInTicks;};ComponentArt_SchedulerDaysView.prototype.get_effectivePrecisionInUnits=function(){if(this.EffectivePrecisionInUnits==null){this.calculateEffectivePrecision();}return this.EffectivePrecisionInUnits;};ComponentArt_SchedulerDaysView.prototype.get_parent=function(){return this.Parent;};ComponentArt_SchedulerDaysView.prototype.set_parent=function(_5c){this.Parent=_5c;};ComponentArt_SchedulerDaysView.prototype.get_elementId=function(){return this.ElementID;};ComponentArt_SchedulerDaysView.prototype.get_height=function(){return this.Height;};ComponentArt_SchedulerDaysView.prototype.get_width=function(){return this.Width;};ComponentArt_SchedulerDaysView.prototype.get_gridHeight=function(){return this.GridHeight;};ComponentArt_SchedulerDaysView.prototype.get_gridWidth=function(){return this.GridWidth;};ComponentArt_SchedulerDaysView.prototype.get_columns=function(){return this.Columns;};ComponentArt_SchedulerDaysView.prototype.get_rows=function(){return this.Rows;};ComponentArt_SchedulerDaysView.prototype.get_startDate=function(){return this.StartDate;};ComponentArt_SchedulerDaysView.prototype.set_startDate=function(_5d){this.StartDate=_5d;};ComponentArt_SchedulerDaysView.prototype.get_startTime=function(){return this.StartTime;};ComponentArt_SchedulerDaysView.prototype.set_startTime=function(_5e){this.StartTime=ComponentArt_DateOperation.getTimeOnly(_5e);};ComponentArt_SchedulerDaysView.prototype.get_endDate=function(){return this.EndDate;};ComponentArt_SchedulerDaysView.prototype.set_endDate=function(_5f){this.EndDate=_5f;};ComponentArt_SchedulerDaysView.prototype.get_endTime=function(){return this.EndTime;};ComponentArt_SchedulerDaysView.prototype.set_endTime=function(_60){this.EndTime=ComponentArt_DateOperation.getTimeOnly(_60);};ComponentArt_SchedulerDaysView.prototype.get_rowTicks=function(){return this.RowTicks;};ComponentArt_SchedulerDaysView.prototype.set_rowTicks=function(_61){this.RowTicks=_61;};ComponentArt_SchedulerDaysView.prototype.get_rowCssClass=function(){return this.RowCssClass;};ComponentArt_SchedulerDaysView.prototype.set_rowCssClass=function(_62){this.RowCssClass=_62;};ComponentArt_SchedulerDaysView.prototype.get_columnCssClass=function(){return this.ColumnCssClass;};ComponentArt_SchedulerDaysView.prototype.set_columnCssClass=function(_63){this.ColumnCssClass=_63;};ComponentArt_SchedulerDaysView.prototype.get_width=function(){return this.Width;};ComponentArt_SchedulerDaysView.prototype.set_width=function(_64){this.Width=_64;};ComponentArt_SchedulerDaysView.prototype.get_height=function(){return this.Height;};ComponentArt_SchedulerDaysView.prototype.set_height=function(_65){this.Height=_65;};ComponentArt_SchedulerDaysView.prototype.get_appointmentDisplays=function(){return this.AppointmentDisplays;};ComponentArt_SchedulerDaysView.prototype.get_period=function(){var _66=ComponentArt_DateOperation.addTicksToDate(this.getEffectiveStartDate(),this.getEffectiveStartTime());var _67=ComponentArt_DateOperation.addTicksToDate(this.getEffectiveEndDate(),this.getEffectiveEndTime());return new ComponentArt_Period(_66,ComponentArt_DateOperation.subtractDates(_67,_66));};ComponentArt_SchedulerDaysView.prototype.get_usePercentageUnits=function(){return this.UsePercentageUnits;};ComponentArt_SchedulerDaysView.prototype.set_usePercentageUnits=function(_68){this.UsePercentageUnits=_68;};ComponentArt_SchedulerDaysView.prototype.get_columnCount=ComponentArt_SchedulerDaysView.prototype.get_dateCount=function(){return this.DateCount;};ComponentArt_SchedulerDaysView.prototype.set_columnCount=ComponentArt_SchedulerDaysView.prototype.set_dateCount=function(_69){this.DateCount=_69;};ComponentArt_SchedulerDaysView.prototype.get_rowCount=function(){return this.RowCount;};ComponentArt_SchedulerDaysView.prototype.set_rowCount=function(_6a){this.RowCount=_6a;};ComponentArt_SchedulerDaysView.prototype.get_dayTime=function(){return this.DayTime;};ComponentArt_SchedulerDaysView.prototype.set_dayTime=function(_6b){this.DayTime=_6b;};ComponentArt_SchedulerDaysView.prototype.get_columnWidth=function(){return this.ColumnWidth;};ComponentArt_SchedulerDaysView.prototype.set_columnWidth=function(_6c){this.ColumnWidth=_6c;};ComponentArt_SchedulerDaysView.prototype.get_rowHeight=function(){return this.RowHeight;};ComponentArt_SchedulerDaysView.prototype.set_rowHeight=function(_6d){this.RowHeight=_6d;};ComponentArt_SchedulerDaysView.prototype.get_rowHeaderWidth=function(){return this.RowHeaderWidth;};ComponentArt_SchedulerDaysView.prototype.set_rowHeaderWidth=function(_6e){this.RowHeaderWidth=_6e;};ComponentArt_SchedulerDaysView.prototype.get_rowHeaderTimeFormat=function(){return this.RowHeaderTimeFormat;};ComponentArt_SchedulerDaysView.prototype.set_rowHeaderTimeFormat=function(_6f){this.RowHeaderTimeFormat=_6f;};ComponentArt_SchedulerDaysView.prototype.get_rowHeaderCellCssClass=function(){return this.RowHeaderCellCssClass;};ComponentArt_SchedulerDaysView.prototype.set_rowHeaderCellCssClass=function(_70){this.RowHeaderCellCssClass=_70;};ComponentArt_SchedulerDaysView.prototype.get_rowHeaderCellClientTemplate=function(){return this.RowHeaderCellClientTemplate;};ComponentArt_SchedulerDaysView.prototype.set_rowHeaderCellClientTemplate=function(_71){this.RowHeaderCellClientTemplate=_71;};ComponentArt_SchedulerDaysView.prototype.get_columnHeaderHeight=function(){return this.ColumnHeaderHeight;};ComponentArt_SchedulerDaysView.prototype.set_columnHeaderHeight=function(_72){this.ColumnHeaderHeight=_72;};ComponentArt_SchedulerDaysView.prototype.get_columnHeaderDateFormat=function(){return this.ColumnHeaderDateFormat;};ComponentArt_SchedulerDaysView.prototype.set_columnHeaderDateFormat=function(_73){this.ColumnHeaderDateFormat=_73;};ComponentArt_SchedulerDaysView.prototype.get_columnHeaderCellCssClass=function(){return this.ColumnHeaderCellCssClass;};ComponentArt_SchedulerDaysView.prototype.set_columnHeaderCellCssClass=function(_74){this.ColumnHeaderCellCssClass=_74;};ComponentArt_SchedulerDaysView.prototype.get_columnHeaderCellClientTemplate=function(){return this.ColumnHeaderCellClientTemplate;};ComponentArt_SchedulerDaysView.prototype.set_columnHeaderCellClientTemplate=function(_75){this.ColumnHeaderCellClientTemplate=_75;};ComponentArt_SchedulerDaysView.prototype.get_columnHeaderCssClass=function(){return this.ColumnHeaderCssClass;};ComponentArt_SchedulerDaysView.prototype.set_columnHeaderCssClass=function(_76){this.ColumnHeaderCssClass=_76;};ComponentArt_SchedulerDaysView.prototype.get_rowHeaderCssClass=function(){return this.RowHeaderCssClass;};ComponentArt_SchedulerDaysView.prototype.set_rowHeaderCssClass=function(_77){this.RowHeaderCssClass=_77;};ComponentArt_SchedulerDaysView.prototype.get_cssClass=function(){return this.CssClass;};ComponentArt_SchedulerDaysView.prototype.set_cssClass=function(_78){this.CssClass=_78;};ComponentArt_SchedulerDaysView.prototype.get_gridCssClass=function(){return this.GridCssClass;};ComponentArt_SchedulerDaysView.prototype.set_gridCssClass=function(_79){this.GridCssClass=_79;};ComponentArt_SchedulerDaysView.prototype.get_cornerCellCssClass=function(){return this.CornerCellCssClass;};ComponentArt_SchedulerDaysView.prototype.set_cornerCellCssClass=function(_7a){this.CornerCellCssClass=_7a;};ComponentArt_SchedulerDaysView.prototype.get_now=function(){return this.Now;};ComponentArt_SchedulerDaysView.prototype.set_now=function(_7b){this.Now=_7b;};ComponentArt_SchedulerDaysView.prototype.get_columnPaddingLeft=function(){return this.ColumnPaddingLeft;};ComponentArt_SchedulerDaysView.prototype.set_columnPaddingLeft=function(_7c){this.ColumnPaddingLeft=_7c;};ComponentArt_SchedulerDaysView.prototype.get_columnPaddingRight=function(){return this.ColumnPaddingRight;};ComponentArt_SchedulerDaysView.prototype.set_columnPaddingRight=function(_7d){this.ColumnPaddingRight=_7d;};ComponentArt_SchedulerDaysView.prototype.get_appointmentHorizontalSpacing=function(){return this.AppointmentHorizontalSpacing;};ComponentArt_SchedulerDaysView.prototype.set_appointmentHorizontalSpacing=function(_7e){this.AppointmentHorizontalSpacing=_7e;};ComponentArt_SchedulerDaysView.prototype.get_appointmentLookId=function(){return this.AppointmentLookId;};ComponentArt_SchedulerDaysView.prototype.set_appointmentLookId=function(_7f){this.AppointmentLookId=_7f;};ComponentArt_SchedulerDaysView.prototype.get_appointmentFocusLookId=function(){return this.AppointmentFocusLookId;};ComponentArt_SchedulerDaysView.prototype.set_appointmentFocusLookId=function(_80){this.AppointmentFocusLookId=_80;};ComponentArt_SchedulerDaysView.prototype.columnInUnits=function(){return this.getEffectiveGridHeight();};ComponentArt_SchedulerDaysView.prototype.columnInTicks=function(){return this.getEffectiveEndTime()-this.getEffectiveStartTime();};ComponentArt_SchedulerDaysView.prototype.usePctX=function(){return this.UsePctX;};ComponentArt_SchedulerDaysView.prototype.usePctY=function(){return this.UsePctY;};ComponentArt_SchedulerDaysView.prototype.getStartDateTime=function(){return new Date(this.get_startDate().getTime()+this.get_startTime());};ComponentArt_SchedulerDaysView.prototype.getEndDateTime=function(){return new Date(this.get_endDate().getTime()+this.get_endTime());};ComponentArt_SchedulerDaysView.prototype.render=function(){for(var _81 in this){if(this.hasOwnProperty(_81)&&_81.slice(0,9)=="Effective"){delete this[_81];}}this.calculateEffectiveDates();this.calculateEffectiveGridHeights();this.calculateEffectiveNow();this.calculateEffectivePrecision();this.calculateEffectiveRowCount();this.calculateEffectiveTimes();this.calculateEffectiveGridWidths();this.initializeColumns();this.initializeColumnHeaders();this.initializeRows();this.initializeRowHeaders();this.initializeColumnTimes();this.initializeColumnPositions();this.initializeRowPositions();var _82=window[this._EffectiveSchedulerID];if(_82){_82.PopulateViewAppointments(this.ClientControlId);}_z132(this);document.getElementById(this.get_elementId()).innerHTML=this.generateHtml();var _83=this.get_appointmentDisplays().get_array();for(var i=0;i<_83.length;i++){_83[i].segments=null;}this.pickerTable={};this.renderAppointments();ComponentArt_SchedulerDaysView.eventHandlingDaysViews[this.ClientControlId]=this;this.UpdateFormFields();this._renderInvoked=true;};ComponentArt_SchedulerDaysView.prototype.generateHtml=function(){var _85=new Array();var _86=this.RowHeader;var _87=_86.getEffectiveWidth();var _88=this.ColumnHeader;var _89=_88.getEffectiveHeight();var _8a=this.getEffectiveGridHeight();var _8b=this.getEffectiveGridWidth();var _8c=_89.add(_8a);var _8d=_87.add(_8b);_85.push("<table cellspacing=\"0\" cellpadding=\"0\" border=\"0\"");if(this.get_cssClass()!=null){_85.push(" class=\"");_85.push(this.get_cssClass());_85.push("\"");}_85.push(" style=\"table-layout:fixed;");if(!_8c.isEmpty()){_85.push("height:"+_8c.toStyleAttributeString()+";");}if(!_8d.isEmpty()){_85.push("width:"+_8d.toStyleAttributeString()+";");}_85.push("\">");_85.push("<tr");_85.push(" style=\"");if(!_89.isEmpty()){_85.push("height:"+_89.toStyleAttributeString()+";");}_85.push("\"");_85.push(">");_85.push("<td");if(this.get_cornerCellCssClass()!=null){_85.push(" class=\"");_85.push(this.get_cornerCellCssClass());_85.push("\"");}_85.push(" style=\"");if(!_87.isEmpty()){_85.push("width:"+_87.toStyleAttributeString()+";");}_85.push("\"");_85.push(">");_85.push("</td>");_85.push("<td");_85.push(" style=\"");if(!_8b.isEmpty()){_85.push("width:"+_8b.toStyleAttributeString()+";");}_85.push("\"");_85.push(">");_85.push(this.generateColumnHeaderHtml(_88));_85.push("</td>");_85.push("</tr>");_85.push("<tr");_85.push(" style=\"");if(!_8a.isEmpty()){_85.push("height:"+_8a.toStyleAttributeString()+";");}_85.push("\"");_85.push(">");_85.push("<td");_85.push(" style=\"");if(!_87.isEmpty()){_85.push("width:"+_87.toStyleAttributeString()+";");}_85.push("\"");_85.push(">");_85.push(this.generateRowHeaderHtml(_86));_85.push("</td>");_85.push("<td");_85.push(" style=\"");if(!_8b.isEmpty()){_85.push("width:"+_8b.toStyleAttributeString()+";");}_85.push("\"");_85.push(">");_85.push(this.generateMultiDayBackgroundHtml());_85.push("</td>");_85.push("</tr>");_85.push("</table>");return _85.join("");};ComponentArt_SchedulerDaysView.prototype.generateColumnHeaderHtml=function(_8e){var _8f=new Array();var _90=_8e.getEffectiveHeight();var _91=this.getEffectiveGridWidth();_8f.push("<div");if(this.get_columnHeaderCssClass()!=null){_8f.push(" class=\"");_8f.push(this.get_columnHeaderCssClass());_8f.push("\"");}_8f.push(" style=\"position:relative;");if(!_90.isEmpty()){_8f.push("height:"+_90.toStyleAttributeString()+";");}if(!_91.isEmpty()){_8f.push("width:"+_91.toStyleAttributeString()+";");}_8f.push("\"");_8f.push(">");var _92=_8e.Cells;var _93=this.get_columns().get_array();for(var i=0;i<_92.length;i++){var _95=_92[i];var _96=_93[i];_8f.push("<div");_8f.push(" style=\"");_8f.push("position:absolute;");_8f.push("top:0px;");_8f.push("height:100%;");_8f.push("left:");_8f.push(_96.get_left().toStyleAttributeString());_8f.push(";");_8f.push("width:");_8f.push(_96.get_width().toStyleAttributeString());_8f.push(";");_8f.push("\"");var _97=_95.getEffectiveCssClass();if(_97!=null){_8f.push(" class=\"");_8f.push(_97);_8f.push("\"");}_8f.push(">");_95.Date=ComponentArt_DateOperation.addTicksToDate(this.getEffectiveStartDate(),i*ComponentArt_DateOperation.ticksPerUnit.Day);var _98=this.get_columnHeaderCellClientTemplate();if(_98){_8f.push(ComponentArt_InstantiateClientTemplate(_98,this,_95));}else{_8f.push(this.DateTimeFormatter.toString(_95.Date,this.get_columnHeaderDateFormat()));}_8f.push("</div>");}return _8f.join("");};ComponentArt_SchedulerDaysView.prototype.generateRowHeaderHtml=function(_99){var _9a=new Array();var _9b=_99.getEffectiveWidth();var _9c=this.getEffectiveGridHeight();_9a.push("<div");if(this.get_rowHeaderCssClass()!=null){_9a.push(" class=\"");_9a.push(this.get_rowHeaderCssClass());_9a.push("\"");}_9a.push(" style=\"position:relative;");if(!_9c.isEmpty()){_9a.push("height:"+_9c.toStyleAttributeString()+";");}if(!_9b.isEmpty()){_9a.push("width:"+_9b.toStyleAttributeString()+";");}_9a.push("\"");_9a.push(">");var _9d=_99.Cells;var _9e=this.get_rows().get_array();for(var i=0;i<_9d.length;i++){var _a0=_9d[i];var row=_9e[i];_9a.push("<div");_9a.push(" style=\"");_9a.push("position:absolute;");_9a.push("left:0px;");_9a.push("width:100%;");_9a.push("top:");_9a.push(row.get_top().toStyleAttributeString());_9a.push(";");_9a.push("height:");_9a.push(row.get_height().toStyleAttributeString());_9a.push(";");_9a.push("\"");var _a2=_a0.getEffectiveCssClass();if(_a2!=null){_9a.push(" class=\"");_9a.push(_a2);_9a.push("\"");}_9a.push(">");_a0.Time=new Date(new Date(2008,1,1).getTime()+this.getEffectiveStartTime()+i*this.getEffectiveRowTicks());var _a3=this.get_rowHeaderCellClientTemplate();if(_a3){_9a.push(ComponentArt_InstantiateClientTemplate(_a3,this,_a0));}else{_9a.push(this.DateTimeFormatter.toString(_a0.Time,this.get_rowHeaderTimeFormat()));}_9a.push("</div>");}return _9a.join("");};ComponentArt_SchedulerDaysView.SegmentElementEvents={"handler":function(){var _a4=window.event?window.event:arguments[0];var _a5=this;var _a6=window[_a5.SchedulerViewId];var _a7=_a6.getAppointmentById(_a5.AppointmentInstanceId);return ComponentArt_SchedulerDaysView.SegmentElementEvents[_a4.type](_a6,_a7,_a5,_a4);},"blur":function(_a8,_a9,_aa,_ab){_a8.setFocusAppointmentId(null);return true;},"click":function(_ac,_ad,_ae,_af){if(ComponentArt.Web.UI.SchedulerDaysView._shifting!=null||ComponentArt.Web.UI.SchedulerDaysView._timeLastShiftCompleted!=null&&new Date()-ComponentArt.Web.UI.SchedulerDaysView._timeLastShiftCompleted>50){return ComponentArt_CancelEvent(_af);}if(_ac.setFocusAppointmentId(_ad.get_appointmentID())){return true;}else{_ac.onAppointmentModifyOpen(_ad,_ae,_af);return ComponentArt_CancelEvent(_af);}},"dblclick":function(_b0,_b1,_b2,_b3){if(ComponentArt.Web.UI.SchedulerDaysView._shifting!=null||ComponentArt.Web.UI.SchedulerDaysView._timeLastShiftCompleted!=null&&new Date()-ComponentArt.Web.UI.SchedulerDaysView._timeLastShiftCompleted>50){return ComponentArt_CancelEvent(_b3);}_b0.onAppointmentModifyOpen(_b1,_b2,_b3);return true;},"dragstart":function(_b4,_b5,_b6,_b7){return true;},"focus":function(_b8,_b9,_ba,_bb){if(ComponentArt.Web.UI.SchedulerDaysView._shifting!=null||ComponentArt.Web.UI.SchedulerDaysView._timeLastShiftCompleted!=null&&new Date()-ComponentArt.Web.UI.SchedulerDaysView._timeLastShiftCompleted>50){return ComponentArt_CancelEvent(_bb);}_b8.setFocusAppointmentId(_b9.get_appointmentID());return true;},"keydown":function(_bc,_bd,_be,_bf){switch(_bf.keyCode){case 46:var _c0=window[_bc._EffectiveSchedulerID];for(var i=0;i<_c0.Appointments.length;i++){if(_c0.Appointments[i].get_appointmentID()==_bd.get_appointmentID()){_c0.removeAppointment(_c0.Appointments[i]);}}break;case 13:_bc.onAppointmentModifyOpen(_bd,_be,_bf);break;default:break;}return true;},"keypress":function(_c2,_c3,_c4,_c5){return true;},"keyup":function(_c6,_c7,_c8,_c9){return true;},"mousedown":function(_ca,_cb,_cc,_cd){return ComponentArt.Web.UI.SchedulerDaysView.moveAppointment(_cd);},"mouseup":function(_ce,_cf,_d0,_d1){return true;},"mouseover":function(_d2,_d3,_d4,_d5){if(ComponentArt_Contains(_d4,ComponentArt_FromElement(_d5))){return true;}if(_d2.maxZIndex==null){_d2.maxZIndex=90210;}_d4.style.zIndex=_d2.maxZIndex++;},"select":function(_d6,_d7,_d8,_d9){return ComponentArt_CancelEvent(_d9);},"selectstart":function(_da,_db,_dc,_dd){return ComponentArt_CancelEvent(_dd);}};ComponentArt_SchedulerDaysView.prototype.ModifiableProperties=["Description","Duration","Start","Tag","Title"];ComponentArt_SchedulerDaysView.prototype.onAppointmentModifyOpen=function(_de,_df,_e0){var _e1=this.get_events().getHandler("appointmentModifyOpen");if(_e1){this._appointmentBefore=new ComponentArt_SchedulerAppointment();this._appointmentBefore.Properties={};for(var _e2 in _de.Properties){this._appointmentBefore.Properties[_e2]=_de.Properties[_e2];}for(var i=0;i<this.ModifiableProperties.length;i++){var _e4=this.ModifiableProperties[i];this._appointmentBefore.Properties[_e4]=_de.Properties[_e4];}_e1(this,{"AppointmentInstance":_de,"SegmentElement":_df,"Event":_e0});}};ComponentArt_SchedulerDaysView.prototype.generateMultiDayBackgroundHtml=function(){var _e5=new Array();var _e6=this.getEffectiveGridWidth();var _e7=this.getEffectiveGridHeight();_e5.push("<div");if(this.TabIndex){_e5.push(" tabindex=\"");_e5.push(this.TabIndex);_e5.push("\"");}if(this.get_gridCssClass()!=null){_e5.push(" class=\"");_e5.push(this.get_gridCssClass());_e5.push("\"");}_e5.push(" style=\"position:relative;");if(!_e7.isEmpty()){_e5.push("height:"+_e7.toStyleAttributeString()+";");}if(!_e6.isEmpty()){_e5.push("width:"+_e6.toStyleAttributeString()+";");}_e5.push("\"");_e5.push(">");var _e8=this.get_columns().get_array();for(var i=0;i<_e8.length;i++){var _ea=_e8[i];_e5.push("<div");_e5.push(" style=\"");_e5.push("position:absolute;");_e5.push("top:0px;");_e5.push("height:100%;");_e5.push("left:");_e5.push(_ea.get_left().toStyleAttributeString());_e5.push(";");_e5.push("width:");_e5.push(_ea.get_width().toStyleAttributeString());_e5.push(";");_e5.push("\"");var _eb=_ea.get_effectiveCssClass();if(_eb!=null){_e5.push(" class=\"");_e5.push(_eb);_e5.push("\"");}_e5.push(">");_e5.push("</div>");}var _ec=this.get_rows().get_array();for(var i=0;i<_ec.length;i++){var row=_ec[i];_e5.push("<div");_e5.push(" style=\"");_e5.push("position:absolute;");_e5.push("left:0px;");_e5.push("width:100%;");_e5.push("top:");_e5.push(row.get_top().toStyleAttributeString());_e5.push(";");_e5.push("height:");_e5.push(row.get_height().toStyleAttributeString());_e5.push(";");_e5.push("\"");var _ee=row.get_effectiveCssClass();if(_ee!=null){_e5.push(" class=\"");_e5.push(_ee);_e5.push("\"");}_e5.push(">");_e5.push("</div>");}_e5.push("<div");_e5.push(" onclick=\"ComponentArt_SchedulerDaysView.onclick(event, this, window.");_e5.push(this.ClientControlId);_e5.push(")\"");_e5.push(" id=\"");_e5.push(this.get_elementId());_e5.push("_appointments\"");_e5.push(" style=\"z-index:300;position:absolute;left:0px;top:0px;height:100%;width:100%;overflow:hidden;\"");_e5.push(">");_e5.push("</div>");_e5.push("</div>");return _e5.join("");};ComponentArt_SchedulerDaysView.onclick=function(e,_f0,_f1){var evt=e?e:window.event;if(e.target!=_f0&&e.srcElement!=_f0){return;}_f1.setFocusAppointmentId(null);var _f3=new ComponentArt_SchedulerAppointment();_f3.set_title("");_f3.set_description("");_f3.set_duration(_f1.getEffectiveRowTicks());var x=(e.layerX!=null)?e.layerX:e.x;var y=(e.layerY!=null)?e.layerY:e.y;var _f6=document.getElementById(_f1.get_elementId()+"_appointments");var _f7=_f6.offsetHeight;var _f8=(y/_f7)*(_f1.getEffectiveEndTime()-_f1.getEffectiveStartTime());var _f9=_f6.offsetWidth/_f1.getEffectiveDateCount();var _fa=Math.floor(x/_f9)*ComponentArt_DateOperation.ticksPerUnit.Day;_f3.set_start(ComponentArt_DateOperation.addTicksToDate(_f1.get_period().get_startDateTime(),_fa+_f8));var _fb=_f1.get_events().getHandler("appointmentAddOpen");if(_fb){_fb(_f1,{"AppointmentInstance":_f3,"Event":e});}};ComponentArt_SchedulerDaysView.prototype.get_todayColumnCssClass=function(){return this.TodayColumnCssClass;};ComponentArt_SchedulerDaysView.prototype.set_todayColumnCssClass=function(_fc){this.TodayColumnCssClass=_fc;};ComponentArt_SchedulerDaysView.prototype.get_todayColumnHeaderCellCssClass=function(){return this.TodayColumnHeaderCellCssClass;};ComponentArt_SchedulerDaysView.prototype.set_todayColumnHeaderCellCssClass=function(_fd){this.TodayColumnHeaderCellCssClass=_fd;};ComponentArt_SchedulerDaysView.prototype.getEffectiveColumnCssClass=function(_fe){if(_fe.get_dateTicks()==ComponentArt_DateOperation.getDateOnly(this.getEffectiveNow()).getTime()&&this.get_todayColumnCssClass()){return this.get_todayColumnCssClass();}else{return this.get_columnCssClass();}};ComponentArt_SchedulerDaysView.prototype.getEffectiveColumnHeaderCellCssClass=function(_ff){if(_ff.DateTicks==ComponentArt_DateOperation.getDateOnly(this.getEffectiveNow()).getTime()&&this.get_todayColumnHeaderCellCssClass()){return this.get_todayColumnHeaderCellCssClass();}else{return this.get_columnHeaderCellCssClass();}};ComponentArt_SchedulerDaysView.prototype.getAppointmentById=function(_100){if(_100==null){return null;}var _101=this.Appointments;for(var i=0;i<_101.length;i++){var _103=_101[i];if(_103.get_appointmentID()==_100){return _103;}}return null;};ComponentArt_SchedulerDaysView.prototype.getAppointmentDisplayById=function(_104){if(_104==null){return null;}var _105=this.get_appointmentDisplays().get_array();for(var i=0;i<_105.length;i++){var _107=_105[i];if(_107.AppointmentInstance.get_appointmentID()==_104){return _107;}}return null;};ComponentArt_SchedulerDaysView.prototype.setFocusAppointmentId=function(_108){var _109=this.getAppointmentDisplayById(this.FocusAppointmentId);var _10a=this.getAppointmentDisplayById(_108);if(_109==_10a){return false;}this.FocusAppointmentId=_108;if(_109!=null){this.destroyAppointmentDisplayElements(_109);this.createAppointmentDisplayElements(_109);}if(_10a!=null){this.destroyAppointmentDisplayElements(_10a);this.createAppointmentDisplayElements(_10a);}return true;};ComponentArt_SchedulerDaysView.prototype.hookUpAppointmentDisplayPickers=function(){var _10b=this.Appointments;for(var _10c in this.pickerTable){if(this.pickerTable.hasOwnProperty(_10c)){for(var i=0;i<_10b.length;i++){var _10e=_10b[i];if(_10c==_10e.get_appointmentID()){var _10f=this.pickerTable[_10c];var _110=_10c+"_startPicker";var _111=window[_110]=new Picker(_110);_111.set_format(_10f.format);_111.set_date(_10f.start);_111.attach(_10f.elementId);}}}}};ComponentArt_SchedulerDaysView.prototype.Initialize=function(){this.render();if(this.get_events().getHandler("load")){setTimeout(this.ClientControlId+".get_events().getHandler('load')("+this.ClientControlId+", Sys.EventArgs.Empty)",1);}};ComponentArt_SchedulerDaysView.prototype.populateAppointments=function(_112){this.Appointments=_112;if(this._renderInvoked){this.renderAppointments();}};ComponentArt.Web.UI.SchedulerDaysView._minimumShiftDuration=100;ComponentArt.Web.UI.SchedulerDaysView._shiftingOnMouseUp=function(){ComponentArt_RemoveEventHandler(document,"mousemove",ComponentArt.Web.UI.SchedulerDaysView._shiftingOnMouseMove);ComponentArt_RemoveEventHandler(document,"mouseup",ComponentArt.Web.UI.SchedulerDaysView._shiftingOnMouseUp);var _113=ComponentArt.Web.UI.SchedulerDaysView._shifting;document.body.className=_113.bodyClassName;var _114=new Date()-_113.startTime;var _115=_113.mouseMoveMade&&_114>ComponentArt.Web.UI.SchedulerDaysView._minimumShiftDuration;if(_115){ComponentArt.Web.UI.SchedulerDaysView._timeLastShiftCompleted=new Date();switch(_113.type){case "resizeByStart":ComponentArt.Web.UI.SchedulerDaysView.onChangeStart({"schedulerView":_113.schedulerView,"appointmentInstance":_113.appointmentInstance,"y":_113.changeY});break;case "resizeByEnd":ComponentArt.Web.UI.SchedulerDaysView.onChangeEnd({"schedulerView":_113.schedulerView,"appointmentInstance":_113.appointmentInstance,"y":_113.changeY});break;case "move":ComponentArt.Web.UI.SchedulerDaysView.onMoveEnd({"schedulerView":_113.schedulerView,"appointmentInstance":_113.appointmentInstance,"x":_113.changeX,"y":_113.changeY});break;}}else{ComponentArt.Web.UI.SchedulerDaysView._timeLastShiftCompleted=null;}ComponentArt.Web.UI.SchedulerDaysView._shifting=null;};ComponentArt.Web.UI.SchedulerDaysView._shiftingOnMouseMove=function(evt){if(ComponentArt.Web.UI.SchedulerDaysView._shifting==null){return false;}var _117=evt?evt:window.event;var _118=ComponentArt.Web.UI.SchedulerDaysView._shifting;_118.mouseMoveMade=true;_118.changeX=_117.screenX-_118.eventScreenXOriginal;_118.changeY=_117.screenY-_118.eventScreenYOriginal;switch(_118.type){case "resizeByStart":var _119=Math.max(_118.minHeight,_118.segmentElementOffsetHeightOriginal-_118.changeY);_118.segmentElement.style.height=_119+"px";_118.segmentElement.style.top=_118.segmentElementOffsetTopOriginal-_119+_118.segmentElementOffsetHeightOriginal+"px";break;case "resizeByEnd":var _119=Math.max(_118.minHeight,_118.segmentElementOffsetHeightOriginal+_118.changeY);_118.segmentElement.style.height=_119+"px";break;case "move":_118.segmentElement.style.top=_118.segmentElementOffsetTopOriginal+_118.changeY+"px";_118.segmentElement.style.left=_118.segmentElementOffsetLeftOriginal+_118.changeX+"px";break;}};ComponentArt.Web.UI.SchedulerDaysView.resizeAppointmentByStart=function(evt){if(ComponentArt.Web.UI.SchedulerDaysView._shifting!=null){return false;}var _11b=ComponentArt.Web.UI.SchedulerDaysView._shifting={};_11b.startTime=new Date();_11b.mouseMoveMade=false;_11b.type="resizeByStart";_11b.bodyClassName=document.body.className;document.body.className+=" ca_cursor_n_resize_important";var _11c=evt?evt:window.event;var _11d=_11c.srcElement?_11c.srcElement:_11c.target;var _11e=ComponentArt.Web.UI.SchedulerDaysView.getSegmentElement(_11d);var _11f=window[_11e.SchedulerViewId];var _120=_11f.getAppointmentById(_11e.AppointmentInstanceId);_11b.changeX=0;_11b.changeY=0;_11b.eventScreenXOriginal=_11c.screenX;_11b.eventScreenYOriginal=_11c.screenY;_11b.segmentElement=_11e;_11b.segmentElementOffsetTopOriginal=_11e.offsetTop;_11b.segmentElementOffsetLeftOriginal=_11e.offsetLeft;_11b.segmentElementOffsetWidthOriginal=_11e.offsetWidth;_11b.segmentElementOffsetHeightOriginal=_11e.offsetHeight;_11b.minHeight=1;_11b.appointmentInstance=_120;_11b.schedulerView=_11f;ComponentArt_AddEventHandler(document,"mouseup",ComponentArt.Web.UI.SchedulerDaysView._shiftingOnMouseUp);ComponentArt_AddEventHandler(document,"mousemove",ComponentArt.Web.UI.SchedulerDaysView._shiftingOnMouseMove);};ComponentArt.Web.UI.SchedulerDaysView.resizeAppointmentByEnd=function(evt){if(ComponentArt.Web.UI.SchedulerDaysView._shifting!=null){return false;}var _122=ComponentArt.Web.UI.SchedulerDaysView._shifting={};_122.startTime=new Date();_122.mouseMoveMade=false;_122.type="resizeByEnd";_122.bodyClassName=document.body.className;document.body.className+=" ca_cursor_n_resize_important";var _123=evt?evt:window.event;var _124=_123.srcElement?_123.srcElement:_123.target;var _125=ComponentArt.Web.UI.SchedulerDaysView.getSegmentElement(_124);var _126=window[_125.SchedulerViewId];var _127=_126.getAppointmentById(_125.AppointmentInstanceId);_122.changeX=0;_122.changeY=0;_122.eventScreenXOriginal=_123.screenX;_122.eventScreenYOriginal=_123.screenY;_122.segmentElement=_125;_122.segmentElementOffsetTopOriginal=_125.offsetTop;_122.segmentElementOffsetLeftOriginal=_125.offsetLeft;_122.segmentElementOffsetWidthOriginal=_125.offsetWidth;_122.segmentElementOffsetHeightOriginal=_125.offsetHeight;_122.minHeight=1;_122.appointmentInstance=_127;_122.schedulerView=_126;ComponentArt_AddEventHandler(document,"mouseup",ComponentArt.Web.UI.SchedulerDaysView._shiftingOnMouseUp);ComponentArt_AddEventHandler(document,"mousemove",ComponentArt.Web.UI.SchedulerDaysView._shiftingOnMouseMove);};ComponentArt.Web.UI.SchedulerDaysView.moveAppointment=function(evt){if(ComponentArt.Web.UI.SchedulerDaysView._shifting!=null){return false;}var _129=ComponentArt.Web.UI.SchedulerDaysView._shifting={};_129.startTime=new Date();_129.mouseMoveMade=false;_129.type="move";_129.bodyClassName=document.body.className;document.body.className+=" ca_cursor_move_important";var _12a=evt?evt:window.event;var _12b=_12a.srcElement?_12a.srcElement:_12a.target;var _12c=ComponentArt.Web.UI.SchedulerDaysView.getSegmentElement(_12b);var _12d=window[_12c.SchedulerViewId];var _12e=_12d.getAppointmentById(_12c.AppointmentInstanceId);_129.changeX=0;_129.changeY=0;_129.eventScreenXOriginal=_12a.screenX;_129.eventScreenYOriginal=_12a.screenY;_129.segmentElement=_12c;_129.segmentElementOffsetTopOriginal=_12c.offsetTop;_129.segmentElementOffsetLeftOriginal=_12c.offsetLeft;_129.segmentElementOffsetWidthOriginal=_12c.offsetWidth;_129.segmentElementOffsetHeightOriginal=_12c.offsetHeight;_129.minHeight=1;_129.appointmentInstance=_12e;_129.schedulerView=_12d;ComponentArt_AddEventHandler(document,"mouseup",ComponentArt.Web.UI.SchedulerDaysView._shiftingOnMouseUp);ComponentArt_AddEventHandler(document,"mousemove",ComponentArt.Web.UI.SchedulerDaysView._shiftingOnMouseMove);};ComponentArt.Web.UI.SchedulerDaysView.getSegmentElement=function(_12f){while(_12f&&!_12f.IsSegmentElement){_12f=_12f.parentNode;}return _12f;};ComponentArt.Web.UI.SchedulerDaysView.createTheSplitterCatcher=function(){var _130;_130=document.createElement("table");_130.style.backgroundColor="red";_130.cellSpacing=50;var tb=document.createElement("tbody");_130.appendChild(tb);var tr=document.createElement("tr");tb.appendChild(tr);var td=document.createElement("td");tr.appendChild(td);var div=document.createElement("div");div.className="greenyellow";div.style.width="110px";div.style.height="110px";div.style.overflow="hidden";td.appendChild(div);var x=800;var y=200;_130.style.position="absolute";_130.style.cursor="N-resize";_130.style.top=(y-50)+"px";_130.style.left=(x-50)+"px";_130.style.zIndex=90210;document.body.insertBefore(_130,document.body.firstChild);};ComponentArt.Web.UI.SchedulerDaysView.createTheCatcher=function(){var _137=document.createElement("div");var html=[];html.push("<table cellpadding=\"0\" cellspacing=\"1000\"");html.push(" style=\"background-color:orange;position:absolute;top:0;left:0;z-index:90210;cursor:N-resize;\"");html.push(">");html.push("<tr>");html.push("<td style=\"background-color:red;\">");html.push("A");html.push("</td>");html.push("</tr>");html.push("</table>");_137.innerHTML=html.join("");var _139=_137.firstChild;_139.onmousemove=ComponentArt.Web.UI.SchedulerDaysView.catcher_onmousemove;_139.onmouseup=ComponentArt.Web.UI.SchedulerDaysView.catcher_onmouseup;ComponentArt_AddEventHandler(document,"keydown",ComponentArt.Web.UI.SchedulerDaysView.catcher_onkeydown);document.body.insertBefore(_139,document.body.firstChild);delete _137;};ComponentArt.Web.UI.SchedulerDaysView.catcher_onmousemove=function(){};ComponentArt.Web.UI.SchedulerDaysView.catcher_onmouseup=function(){};ComponentArt.Web.UI.SchedulerDaysView.catcher_onkeydown=function(){};ComponentArt_SchedulerDaysView.onMoveEnd=function(_13a){var _13b=_13a.schedulerView;var _13c=_13a.appointmentInstance;var x=_13a.x;var y=_13a.y;var _13f=document.getElementById(_13b.get_elementId()+"_appointments");var _140=_13f.offsetHeight;var _141=y;var _142=_13b.getEffectiveEndTime()-_13b.getEffectiveStartTime();var _143=Math.round(_141*_142/_140);var _144=_13f.offsetWidth/_13b.getEffectiveDateCount();var _145=x;var _146=Math.round(_145/_144);var _147=_146*ComponentArt_DateOperation.ticksPerUnit.Day;var _148=_147+_143;if(_148==0){return;}var _149=_13c.get_start();var _14a=ComponentArt_DateOperation.addTicksToDate(_149,_148);var _14b=window[_13b._EffectiveSchedulerID];var _14c=_14b.createAppointmentCopy(_13c);if(!_14b.modifyAppointment(_13c,{"Start":_14a})){_14b.copyAppointment(_14c,_13c);}_13b.renderAppointments();};ComponentArt_SchedulerDaysView.onChangeStart=function(_14d){var _14e=_14d.schedulerView;var _14f=_14d.appointmentInstance;var y=_14d.y;var _151=document.getElementById(_14e.get_elementId()+"_appointments");var _152=_151.offsetHeight;var _153=y;var _154=_14e.getEffectiveEndTime()-_14e.getEffectiveStartTime();var _155=Math.round(_153*_154/_152);var _156=_14f.get_start();var _157=_14f.get_duration();var _158=ComponentArt_DateOperation.addTicksToDate(_156,_155);var _159=_157-_155;var _15a=window[_14e._EffectiveSchedulerID];var _15b=_15a.createAppointmentCopy(_14f);if(!_15a.modifyAppointment(_14f,{"Start":_158,"Duration":_159})){_15a.copyAppointment(_15b,_14f);}_14e.renderAppointments();};ComponentArt_SchedulerDaysView.onChangeEnd=function(_15c){var _15d=_15c.schedulerView;var _15e=_15c.appointmentInstance;var y=_15c.y;var _160=document.getElementById(_15d.get_elementId()+"_appointments");var _161=_160.offsetHeight;var _162=y;var _163=_15d.getEffectiveEndTime()-_15d.getEffectiveStartTime();var _164=Math.round(_162*_163/_161);var _165=_15e.get_duration();var _166=_165+_164;var _167=window[_15d._EffectiveSchedulerID];var _168=_167.createAppointmentCopy(_15e);if(!_167.modifyAppointment(_15e,{"Duration":_166})){_167.copyAppointment(_168,_15e);}_15d.renderAppointments();};ComponentArt_SchedulerDaysView.prototype.addAppointment=function(_169){var _16a={};for(var i=0;i<this.ModifiableProperties.length;i++){var _16c=this.ModifiableProperties[i];_16a[_16c]=_169.GetProperty(_16c);}var _16d=window[this._EffectiveSchedulerID];_16d.addAppointment(_169,_16a);};ComponentArt_SchedulerDaysView.prototype.modifyAppointment=function(_16e){var _16f={};if(this._appointmentBefore){var _170=false;for(var i=0;i<this.ModifiableProperties.length;i++){var _172=this.ModifiableProperties[i];if(ComponentArt_SerializeObject(this._appointmentBefore.GetProperty(_172))!=ComponentArt_SerializeObject(_16e.GetProperty(_172))){_16f[_172]=_16e.GetProperty(_172);_170=true;}}if(_170){for(var _173 in this._appointmentBefore.Properties){_16e.Properties[_173]=this._appointmentBefore.Properties[_173];}var _174=window[this._EffectiveSchedulerID];_174.modifyAppointment(_16e,_16f);}delete this._appointmentBefore;}else{for(var _173 in _16e.Properties){_16f[_172]=_16e.GetProperty(_172);}var _174=window[this._EffectiveSchedulerID];_174.modifyAppointment(_16e,_16f);}};ComponentArt_SchedulerDaysView.prototype.removeAppointment=function(_175){var _176=window[this._EffectiveSchedulerID];_176.removeAppointment(_175);};ComponentArt_SchedulerDaysView.prototype.loadingPanelShow=function(){if(!this.LoadingPanelClientTemplate){return;}if(this.LoadingPanel){_zF3(this.LoadingPanel);this.LoadingPanel=null;}var _177=document.createElement("div");_177.style.position="absolute";_177.style.visibility="hidden";_177.style.zIndex=90210;_177.style.top="0px";_177.style.left="0px";_177.innerHTML=ComponentArt_InstantiateClientTemplate(this.LoadingPanelClientTemplate);this.LoadingPanel=_177;document.body.insertBefore(_177,document.body.firstChild);this.LoadingPanel.style.width=ComponentArt_GetAdjustedWidth(this._element)+"px";this.LoadingPanel.style.height=ComponentArt_GetAdjustedHeight(this._element)+"px";this.LoadingPanel.style.left=_z86(this._element)+"px";this.LoadingPanel.style.top=_z87(this._element)+"px";if(this.LoadingPanelFadeDuration){if(this.LoadingPanelTimeout){clearTimeout(this.LoadingPanelTimeout);}this.LoadingPanel.FadeStartTime=(new Date());if(cart_browser_ie){this.LoadingPanel.style.filter="alpha(opacity=0)";}else{this.LoadingPanel.style.opacity=0;this.LoadingPanel.style.setProperty("-moz-opacity",0,"");}_177.style.visibility="visible";this.PanelFade(true);}else{_177.style.visibility="visible";}};ComponentArt_SchedulerDaysView.prototype.loadingPanelHide=function(){if(!this.LoadingPanel){return;}if(this.LoadingPanelFadeDuration){this.LoadingPanel.FadeStartTime=(new Date());this.PanelFade(false);}else{_zF3(this.LoadingPanel);this.LoadingPanel=null;}};ComponentArt_SchedulerDaysView.prototype.PanelFade=function(_178){if(this.LoadingPanel){var _179=(new Date()).getTime()-this.LoadingPanel.FadeStartTime;var _17a=ComponentArt_SlidePortionCompleted(_179,this.LoadingPanelFadeDuration,2);var _17b=_178?_17a:(1-_17a);_17b=(_17b*Math.max(0,Math.min(100,this.LoadingPanelFadeMaximumOpacity)))/100;if(cart_browser_ie){this.LoadingPanel.style.filter="alpha(opacity="+(_17b*100)+")";}else{this.LoadingPanel.style.opacity=_17b;this.LoadingPanel.style.setProperty("-moz-opacity",_17b,"");}if(_17a==1){if(!_178){_zF3(this.LoadingPanel);this.LoadingPanel=null;}}else{if(this.LoadingPanelTimeout){clearTimeout(this.LoadingPanelTimeout);}this.LoadingPanelTimeout=setTimeout(this.Id+".PanelFade("+_178+")",20);}}};ComponentArt_SchedulerDaysView.prototype.UpdateFormFields=function(){if(document.getElementById(this.ClientControlId+"_properties")){document.getElementById(this.ClientControlId+"_properties").value=window.encodeURIComponent(this.getPropertiesXml());}};ComponentArt_SchedulerDaysView.prototype.getPropertyXml=function(_17c,_17d){var sb=[];sb.push("<Property>");sb.push("<Name>");sb.push(_17c);sb.push("</Name>");sb.push("<Value>");switch(_17c){case "ColumnCssClass":case "RowCssClass":sb.push(_17d);break;case "EndDate":case "StartDate":sb.push((new DateTimeFormatter()).toString(_17d,"yyyyMMddHHmmss"));break;case "ColumnCount":case "Precision":case "StartTime":case "EndTime":sb.push(_17d);break;default:return "";break;}sb.push("</Value>");sb.push("</Property>");return sb.join("");};ComponentArt_SchedulerDaysView.prototype.getPropertiesXml=function(){var sb=[];sb.push("<Properties>");for(var _180 in this.PropertyStorageArray){sb.push(this.getPropertyXml(this.PropertyStorageArray[_180][0],this[this.PropertyStorageArray[_180][0]]));}sb.push("</Properties>");return sb.join("");};window.ComponentArt_Scheduler_Tiler={"tileLessThan":function(_181,_182){return (_181.start<_182.start||(_181.start==_182.start&&_181.end>_182.end));},"tileLessThanOrEqual":function(_183,_184){return (ComponentArt_Scheduler_Tiler.tileLessThan(_183,_184)||(_183.start==_184.start&&_183.end==_184.end));},"tileGreaterThan":function(_185,_186){return ComponentArt_Scheduler_Tiler.tileLessThanOrEqual(_186,_185);},"tileComparer":function(_187,_188){if(ComponentArt_Scheduler_Tiler.tileLessThan(_187,_188)){return -1;}if(ComponentArt_Scheduler_Tiler.tileGreaterThan(_187,_188)){return 1;}return 0;},"tileComparerByEndReversed":function(_189,_18a){if(_189.end<_18a.end){return 1;}if(_189.end>_18a.end){return -1;}return 0;},"crossSectionStart":function(_18b){var _18c=Number.MAX_VALUE;for(var i=0;i<_18b.length;i++){_18c=Math.min(_18c,_18b[i].start);}return _18c;},"crossSectionEnd":function(_18e){var end=Number.MIN_VALUE;for(var i=0;i<_18e.length;i++){end=Math.max(end,_18e[i].end);}return end;},"crossSectionsOverlap":function(_191,_192){var _193=ComponentArt_Scheduler_Tiler.crossSectionStart(_191);var endA=ComponentArt_Scheduler_Tiler.crossSectionEnd(_191);var _195=ComponentArt_Scheduler_Tiler.crossSectionStart(_192);var endB=ComponentArt_Scheduler_Tiler.crossSectionEnd(_192);return endA>=_195&&endB>=_193;},"crossSectionComparerByTime":function(_197,_198){if(_197.index<_198.index){return -1;}if(_197.index>_198.index){return 1;}return 0;},"crossSectionComparerBySizeAndTime":function(_199,_19a){if(_199.length<_19a.length){return 1;}if(_199.length>_19a.length){return -1;}return ComponentArt_Scheduler_Tiler.crossSectionComparerByTime(_199,_19a);},"calculateCrossSections":function(_19b){var _19c=[];var _19d=[];var i=0;var _19f=false;_19b.sort(ComponentArt_Scheduler_Tiler.tileComparer);while(i<_19b.length||_19d.length>0){var _1a0=(i<_19b.length)?_19b[i].start:null;var _1a1=(_19d.length>0)?_19d[_19d.length-1].end:null;if(_1a0==null||_1a1!=null&&_1a1<=_1a0){if(_19f==true){var _1a2=_19d.slice();_1a2.index=_19c.length;_19c.push(_1a2);}_19f=false;_19d.pop();}else{_19f=true;_19d.push(_19b[i]);_19d.sort(ComponentArt_Scheduler_Tiler.tileComparerByEndReversed);i++;}}for(var j=0;j<_19c.length;j++){_19c[j][0].isFirstInACrossSection=true;}return _19c;},"calculateTileChronology":function(_1a4){var _1a5=[];var _1a6=[];var i=0;while(i<_1a4.length||_1a6.length>0){var _1a8=(i<_1a4.length)?_1a4[i].start:null;var _1a9=(_1a6.length>0)?_1a6[_1a6.length-1].end:null;if(_1a8==null||_1a9!=null&&_1a9<=_1a8){var _1aa=_1a6.pop();_1a5.push([_1aa,false]);}else{var _1ab=_1a4[i];_1a5.push([_1ab,true]);i++;_1a6.push(_1ab);_1a6.sort(ComponentArt_Scheduler_Tiler.tileComparerByEndReversed);}}return _1a5;},"tileSpotComparer":function(_1ac,_1ad){if(_1ac.left<_1ad.left){return -1;}if(_1ac.left>_1ad.left){return 1;}alert("tile spot conflict");return 0;},"getEmptySpots":function(_1ae,_1af,_1b0){if(_1b0.length==0){return [{"left":0,"width":_1ae,"position":"left"}];}var _1b1=[];var _1b2=_1b0[0];if(_1b2.left>0&&_1b2.left>_1af){_1b1.push({"left":0,"width":_1b2.left-_1af,"position":"left"});}for(var i=0;i<_1b0.length-1;i++){var _1b4=_1b0[i];var _1b5=_1b0[i+1];var _1b6=_1b4.left+_1b4.width;var _1b7=_1b5.left;var _1b8=_1b7-_1b6;if(_1b8>0&&_1b8>2*_1af){_1b1.push({"left":_1b6+_1af,"width":_1b7-_1af,"position":"middle"});}}var _1b9=_1b0[_1b0.length-1];var _1ba=_1b9.left+_1b9.width;if(_1ba<_1ae&&_1ba<_1ae-_1af){var left=_1ba+_1af;_1b1.push({"left":left,"width":_1ae-left,"position":"right"});}return _1b1;},"addTileSpot":function(tile,_1bd,_1be,_1bf,_1c0){_1bf.sort(ComponentArt_Scheduler_Tiler.tileSpotComparer);var _1c1=ComponentArt_Scheduler_Tiler.getEmptySpots(_1bd,_1be,_1bf);if(!_1c0){_1c1.reverse();}for(var i=0;i<_1c1.length;i++){var _1c3=_1c1[i];if(_1c3.width>=tile.width){if(_1c0){tile.left=_1c3.left;}else{tile.left=_1c3.left+_1c3.width-tile.width;}_1bf.push({"left":tile.left,"width":tile.width,"tile":tile});return;}}alert("tiling error");},"removeTileSpot":function(tile,_1c5){for(var i=0;i<_1c5.length;i++){var spot=_1c5[i];if(spot.tile==tile){tile.left=spot.left;tile.width=spot.width;delete spot;_1c5.splice(i,1);}}},"calculateWidths":function(_1c8,_1c9,_1ca){for(var i=0;i<_1c8.length;i++){var _1cc=_1c8[i];var _1cd=[];var _1ce=_1c9;for(var j=0;j<_1cc.length;j++){var _1d0=_1cc[j];if(_1d0.width){_1ce-=(_1d0.width+_1ca);}else{_1cd.push(_1d0);}}if(_1cd.length>0){var _1d1=Math.round((_1ce-(_1cd.length-1)*_1ca)/_1cd.length);_1d1=_1d1.toFixed(2)-0;for(var k=0;k<_1cd.length-1;k++){_1cd[k].width=_1d1;_1ce-=(_1d1+_1ca);}_1cd[_1cd.length-1].width=_1ce;}}},"calculateLefts":function(_1d3,_1d4,_1d5){var _1d6=false;var _1d7=[];for(var i=0;i<_1d3.length;i++){var _1d9=_1d3[i];for(var j=_1d7.length-1;j>=0;j--){var _1db=_1d7[j];var _1dc=false;for(var k=0;k<_1d9.length;k++){if(_1db.tile==_1d9[k]){_1dc=true;break;}}if(!_1dc){ComponentArt_Scheduler_Tiler.removeTileSpot(_1db.tile,_1d7);}}_1d9.sort(ComponentArt_Scheduler_Tiler.tileComparerByEndReversed);for(var l=0;l<_1d9.length;l++){if(!_1d9[l].positioned){ComponentArt_Scheduler_Tiler.addTileSpot(_1d9[l],_1d4,_1d5,_1d7,_1d6);_1d9[l].positioned=true;}}if(i+1<_1d3.length){var _1df=_1d3[i+1];if(ComponentArt_Scheduler_Tiler.crossSectionsOverlap(_1d9,_1df)){_1d6=!_1d6;}else{_1d6=false;}}}},"calculateTilePositions":function(_1e0,_1e1,_1e2){var _1e3=ComponentArt_Scheduler_Tiler.calculateCrossSections(_1e0);_1e3.sort(ComponentArt_Scheduler_Tiler.crossSectionComparerBySizeAndTime);ComponentArt_Scheduler_Tiler.calculateWidths(_1e3,_1e1,_1e2);_1e3.sort(ComponentArt_Scheduler_Tiler.crossSectionComparerByTime);ComponentArt_Scheduler_Tiler.calculateLefts(_1e3,_1e1,_1e2);var _1e4={};for(var i=0;i<_1e0.length;i++){var tile=_1e0[i];_1e4[tile.id]={"left":tile.left,"width":tile.width};}return _1e4;}};window.cart_schedulerdaysview_loaded=true;}