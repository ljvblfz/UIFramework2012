if(!window.ComponentArt_ComboBox_Kernel_Loaded||window.ComponentArt_ComboBox_ReLoad){function ComponentArt_ComboBox(id){this.DomElementId=id;this.element=this.DomElement=document.getElementById(this.DomElementId);if(window.ComponentArt_Atlas){ComponentArt.Web.UI.ComboBox.initializeBase(this,[this.element]);this.beginUpdate=function(){this._updating=true;};this.endUpdate=function(){this._updating=false;this.Render(true);};this.get_isUpdating=function(){return this._updating;};this.getDescriptor=function(){return _zF0(this.constructor);};}else{this.beginUpdate=function(){this._updating=true;};this.endUpdate=function(){this._updating=false;this.Render(true);};this.get_isUpdating=function(){return this._updating;};}this.ClientControlId=this.Id=id;this.ItemHeight=10;}ComponentArt_ComboBox.prototype.PublicProperties=[["CssClass",String],["CallbackFilterDelay",Number],["CallbackFilterMinimumLength",Number],["Id",String,1],["ItemCount",Number],["SelectedIndex",Number,1],["Text",String,1,1],["TextBoxCssClass",String]];ComponentArt_ComboBox.prototype.PublicMethods=[["AddItem",,null,[["item",Object],["index",Number]]],["Collapse"],["Disable"],["Dispose"],["Enable"],["Expand"],["Filter",,null,[["filterString",String]]],["FindItemByProperty",,Object,[["propertyName",String],["propertyValue",Object]]],["Focus"],["GetItem",,Object,[["index",Number]]],["GetSelectedItem",,Object],["RemoveAll"],["RemoveItemAt",,null,[["index",Number]]],["SelectItem",,null,[["item",Object]]],["SelectItemByIndex",,null,[["id",String]]],["ToggleExpand"],["UnSelect"]];ComponentArt_ComboBox.prototype.PublicEvents=[["BeforeCallback"],["BeforeChange"],["CallbackComplete"],["CallbackError"],["Change"],["Collapse"],["Expand"],["Load"],["Init"]];_zEF(ComponentArt_ComboBox);window.ComponentArt.Web.UI.ComboBox=window.ComponentArt_ComboBox;if(window.ComponentArt_Atlas){ComponentArt.Web.UI.ComboBox.registerClass("ComponentArt.Web.UI.ComboBox",Sys.UI.Control);if(Sys.TypeDescriptor){Sys.TypeDescriptor.addType("componentArtWebUI","comboBox",ComponentArt.Web.UI.ComboBox);}}function ComponentArt_ComboBoxItem(_2){if(window.ComponentArt_Atlas){ComponentArt.Web.UI.ComboBoxItem.initializeBase(this);this.getDescriptor=function(){return _zF0(this.constructor);};}this.Enabled=true;if(_2){this.Data=_2;}else{this.Data=[];}}ComponentArt_ComboBoxItem.prototype.PublicProperties=[["ClientTemplateId"],["CssClass"],["Enabled"],["Id"],["Text"],["Value"]];ComponentArt_ComboBoxItem.prototype.PublicMethods=[["GetProperty",,Object],["SetProperty",,,[["propertyName",String],["propertyValue",Object]]]];_zEF(ComponentArt_ComboBoxItem);window.ComponentArt.Web.UI.ComboBoxItem=window.ComponentArt_ComboBoxItem;if(window.ComponentArt_Atlas){ComponentArt.Web.UI.ComboBoxItem.registerClass("ComponentArt.Web.UI.ComboBoxItem");if(Sys.TypeDescriptor){Sys.TypeDescriptor.addType("componentArtWebUI","comboBoxItem",ComponentArt.Web.UI.ComboBoxItem);}}ComponentArt_ComboBoxItem.prototype.GetProperty=function(_3,_4){for(var i=0;i<this.Data.length;i++){if(this.Data[i][0]==_3){return this.Data[i][1];}}return _4;};ComponentArt_ComboBoxItem.prototype.SetProperty=function(_6,_7){var _8=false;for(var i=0;i<this.Data.length;i++){if(this.Data[i][0]==_6){this.Data[i][1]=_7;_8=true;break;}}if(!_8){this.Data[this.Data.length]=[_6,_7];}this[_6]=_7;};ComponentArt_ComboBox.prototype.get_text=function(){var _a=document.getElementById(this.Id+"_Input");return _a?_a.value:"";};ComponentArt_ComboBox.prototype.set_text=function(_b){var _c=document.getElementById(this.Id+"_Input");if(_c){_c.value=_b;this.HandleInputChange(true);}};ComponentArt_ComboBox.prototype.GetProperty=function(_d){return this[_d];};ComponentArt_ComboBox.prototype.SetProperty=function(_e,_f){this[_e]=_f;};ComponentArt_ComboBox.prototype.AddItem=function(_10,_11){if(!(_11||_11==0)){_11=this.Data.length;}this.Data=this.Data.slice(0,_11).concat([_10.Data]).concat(this.Data.slice(_11));this.ItemCount++;this.LoadedItemCount++;this.TextCache.length=0;this.CssClasses.length=0;};ComponentArt_ComboBox.prototype.Callback=function(url,_13){if(this.CallingBack){return false;}var _14=this;var _15=false;var _16;function Cleanup(){_14.CallingBack=false;_14.HideReloading();if(_14.AutoComplete||_14.AutoHighlight){_14.CompleteAndHighlight();}}function _z19F(){if(_16.readyState&&_16.readyState!=4&&_16.readyState!="complete"){return;}var _17=_15?_16.responseXML:_16;if(_17&&_17.documentElement&&_17.documentElement.childNodes.length==2){var _18=_17.documentElement.childNodes[0];var _19=_17.documentElement.childNodes[1];if(_18.nodeName=="ComboBoxError"){var _1a=_18.firstChild.nodeValue;var _1b=_14.get_events().getHandler("callbackError");if(_1b){_1b(_14,new ComponentArt.Web.UI.ComboBoxCallbackErrorEventArgs(_1a));}else{alert("Callback error:\n"+_1a);}}else{var _1c=_18.firstChild.nodeValue;var _1d=eval(_1c);_14.LoadItems(_1d,_13);_14.LoadParams(_19.childNodes);_14.Render(true);}}else{if(_16.status&&_16.status!=200&&_16.responseText){document.body.innerHTML=_16.responseText;}else{alert("Error loading callback data.");}}Cleanup();var _1b=_14.get_events().getHandler("callbackComplete");if(_1b){_1b(_14,Sys.EventArgs.Empty);}}var _1e=_14.get_events().getHandler("beforeCallback");if(_1e){_1e(_14,Sys.EventArgs.Empty);}this.CallingBack=true;if(window.XMLHttpRequest){_15=true;var _16=new XMLHttpRequest();_16.onreadystatechange=_z19F;_16.open("GET",url,true);_16.send(null);}else{if(document.implementation&&document.implementation.createDocument){_16=document.implementation.createDocument("","",null);_16.onload=_z19F;}else{if(cart_browser_ie){var _1f=this.Id+"_island";var _20=document.getElementById(_1f);if(!_20){_20=document.createElement("xml");_20.id=_1f;document.body.appendChild(_20);}if(_20.XMLDocument){_16=_20.XMLDocument;_16.onreadystatechange=_z19F;}else{return false;}}else{return false;}}}if(!_15){_16.async=true;try{_16.load(url);}catch(ex){Cleanup();alert("Data not loaded: "+(ex.message?ex.message:ex));}}return true;};ComponentArt_ComboBox.prototype.Collapse=function(){if(this.Resizing){return;}var _21=document.getElementById(this.Id+"_DropDown");if(_21&&_21.style.display!="none"){_21.style.overflow="hidden";this.CollapseElement=_21;this.CollapseStartTime=(new Date()).getTime();var _22=ComponentArt_GetAdjustedHeight(_21);ComponentArt_ComboBox_CollapseStep(this,_22);}this.Expanded=false;if(this.AutoTheming){var _23=document.getElementById(this.Id+"_DropDiv");if(_23){_23.className=this.AutoThemingCssClassPrefix+"combobox-drop";}}if(this._oldSelectedIndex!=null&&this._oldSelectedIndex!=this.SelectedIndex){if(this.RunningMode==1){for(var i=this.Data.length-1;i>=0;i--){if(this.Data[i]==null||this.Data[i].length<1){this.Data.splice(i,1);}}}if(this.AutoPostBack){this.Postback();}}};ComponentArt_ComboBox.prototype.CollapseIfBlurred=function(){if(document.activeElement){var _25=document.getElementById(this.Id+"_DropDown");for(var o=document.activeElement;o.parentNode&&o.parentNode!=document.body;o=o.parentNode){if(o.parentNode==_25){this.Focus();break;}}}if(!this.Focused){this.Collapse();}};ComponentArt_ComboBox.prototype.CompleteAndHighlight=function(){var _27=document.getElementById(this.Id+"_Input");if(!_27){return;}if(!_27.value){if(this.SelectedIndex>=0){this.UnSelect();}return;}var _28=_z114(_27);if(!_28){return;}var _29=_27.value.toLowerCase().substring(0,_28);var _2a=false;for(var i=0;i<this.TextCache.length;i++){var _2c=this.TextCache[i];if(_2c&&_2c.toLowerCase().indexOf(_29)==0){if(this.AutoComplete){_27.value=_2c;this.SelectItemByIndex(i);ComponentArt_SetSelectionRange(_27,_29.length,_27.value.length);}if(this.AutoHighlight){if(!this.AutoComplete){this.SelectItemByIndex(i);}this.Expand();}_2a=true;break;}}if(!_2a&&this.SelectedIndex>=0){this.UnSelect();}};ComponentArt_ComboBox.prototype.Disable=function(){if(this.element){this.element.disabled=true;}if(this.TextBoxEnabled){var _2d=document.getElementById(this.Id+"_Input");if(_2d){_2d.disabled=true;if(this.TextBoxDisabledCssClass&&this.TextBoxCssClass){_2d.className=this.TextBoxDisabledCssClass;}}}else{var _2e=document.getElementById(this.Id+"_TextBox");if(_2e){if(this.TextBoxDisabledCssClass&&this.TextBoxCssClass){_2e.className=this.TextBoxDisabledCssClass;}}}this.Collapse();if(this.DisabledCssClass&&this.CssClass){this.element.className=this.DisabledCssClass;}this.Disabled=true;};ComponentArt_ComboBox.prototype.Dispose=function(){if(window.ComponentArt_Atlas){this.element.control=null;}ComponentArt_Dispose(this);ComponentArt_RemoveKeyHandlers(this);this.CollapseElement=this.ExpandElement=null;var _2f=document.getElementById(this.Id+"_DropDown");_zF3(_2f);if(this.OverlayElement){_zF3(this.OverlayElement);}if(this.CallbackProgressDomObj){_zF3(this.CallbackProgressDomObj);}if(this.ContainerObj){_zF3(this.ContainerObj);}window.ComponentArt_ComboBox_ReLoad=true;};ComponentArt_ComboBox.prototype.Enable=function(){if(this.element){this.element.disabled=false;}if(this.TextBoxEnabled){var _30=document.getElementById(this.Id+"_Input");if(_30){_30.disabled=false;if(this.TextBoxDisabledCssClass&&this.TextBoxCssClass){_30.className=this.TextBoxCssClass;}}}else{var _31=document.getElementById(this.Id+"_TextBox");if(_31){if(this.TextBoxDisabledCssClass&&this.TextBoxCssClass){_31.className=this.TextBoxCssClass;}}}if(this.DisabledCssClass&&this.CssClass){this.element.className=this.CssClass;}this.Disabled=false;};ComponentArt_ComboBox.prototype.EnsureDomElement=function(){this.element=this.DomElement=document.getElementById(this.DomElementId);};ComponentArt_ComboBox.prototype.Expand=function(){this.EnsureDomElement();var _32=document.getElementById(this.Id+"_DropDown");var _33=document.getElementById(this.Id+"_DropDownContent");if(_32&&_32.style.display=="none"){var x=_z86(this.element);var y=this.ExpandBaseLine=_z87(this.element)+(this.ExpandDirection==0?ComponentArt_GetAdjustedHeight(this.element):-1);x+=this.DropDownOffsetX;y+=this.DropDownOffsetY;this.DropDownX=x;this.DropDownY=y;if(this.AdjustPositioning){var _36=ComponentArt_ComboBox_GetOffsetX(_32.parentNode,"relative");var _37=ComponentArt_ComboBox_GetOffsetY(_32.parentNode,"relative");if(_36<=x){x-=_36;}if(_37<=y){y-=_37;}var _38=ComponentArt_ComboBox_GetOffsetX(_32.parentNode,"absolute");var _39=ComponentArt_ComboBox_GetOffsetY(_32.parentNode,"absolute");if(_38<=x){x-=_38;}if(_39<=y){y-=_39;}}if(this.element.parentNode){y-=this.element.parentNode.scrollTop;x-=this.element.parentNode.scrollLeft;}_32.style.position="absolute";_32.style.top=y+"px";_32.style.left=x+"px";_32.style.height="";_32.style.visibility="hidden";_32.style.display="";if(!this.DropDownWidth){this.DropDownWidth=ComponentArt_GetAdjustedWidth(this.element);}if(this.DropDownWidth>0){_32.style.width=this.DropDownWidth+"px";}var _3a=ComponentArt_GetAdjustedWidth(_33.parentNode,this.DropDownWidth);_33.style.width=_3a-(this.CacheMapWidth?this.CacheMapWidth:0)+"px";if(!this.DropDownHeight){if(this.HasDropDownContent){this.DropDownHeight=ComponentArt_GetAdjustedHeight(_33);this.ItemHeight=0;}else{if(_33.childNodes.length>this.DropDownPageSize){this.DropDownHeight=_33.childNodes[this.DropDownPageSize].offsetTop;this.ItemHeight=Math.round(this.DropDownHeight/this.DropDownPageSize);}else{this.ItemHeight=ComponentArt_GetAdjustedHeight(_33.firstChild);this.DropDownHeight=this.ItemHeight*this.DropDownPageSize;}}}_33.style.height=this.DropDownHeight+"px";_33.style.overflow="auto";_33.style.overflowX="hidden";var _3b=ComponentArt_GetAdjustedHeight(_32);_32.style.height="1px";_32.style.overflow="hidden";_32.style.visibility="";_32.style.zIndex=90310;this.ExpandStartTime=(new Date()).getTime();this.ExpandElement=_32;this._oldSelectedIndex=this.SelectedIndex;ComponentArt_ComboBox_ExpandStep(this,_3b);}this.Expanded=true;if(this.AutoTheming){var _3c=document.getElementById(this.Id+"_DropDiv");if(_3c){_3c.className=this.AutoThemingCssClassPrefix+"combobox-drop-expanded";}}};ComponentArt_ComboBox.prototype.Fetch=function(_3d,_3e){if(this.IsMvc){var url=this.MvcAjaxUrl?this.MvcAjaxUrl:document.location.href.split("?")[0];var _40=this.CallbackFilterString?this.CallbackFilterString:"";try{var cb=this;var _42=cb.get_events().getHandler("beforeCallback");if(_42){_42(cb,Sys.EventArgs.Empty);}$.ajax({type:"POST",url:url,data:{"Skip":_3d,"Take":_3e,"Filter":_40},dataType:"json",success:function(msg){var _44=msg.d||msg;if(_44.Data&&_44.Data.length){for(var i=0;i<_44.Data.length;i++){var o=_44.Data[i];var _47=o;var _48=o;if(cb.DataTextField){_47=o[cb.DataTextField];}if(cb.DataValueField){_48=o[cb.DataValueField];}cb.Data[_3d+i]=[["Text",_47],["Value",_48]];}}cb.ItemCount=_44.ItemCount;var _49=cb.get_events().getHandler("callbackComplete");if(_49){_49(cb,Sys.EventArgs.Empty);}cb.HideReloading();if(cb.AutoComplete||cb.AutoHighlight){cb.CompleteAndHighlight();}cb.Render(true);}});}catch(ex){}}else{if(this.SoaService){var _4a=this;function FailureCallback(){}function SuccessCallback(_4b,_4c,_4d){if(_4b.Data&&_4b.Data.length&&_4a.DataTextField){for(var i=0;i<_4b.Data.length;i++){var _4f="";var _50=null;for(var j=0;j<_4b.Data[i].length;j++){if(_4b.Data[i][j].Key==_4a.DataTextField){_4f=_4b.Data[i][j].Value;}else{if(_4b.Data[i][j].Key==_4a.DataValueField){_50=_4b.Data[i][j].Value;}}}_4a.Data[_3d+i]=[["Text",_4f],["Value",_50]];}}_4a.ItemCount=_4b.ItemCount;_4a.HideReloading();if(_4a.AutoComplete||_4a.AutoHighlight){_4a.CompleteAndHighlight();}_4a.Render(true);}var _52={"Offset":_3d,"Count":_3e,"Columns":[{"Name":this.DataTextField}],"Filters":(this.DataTextField&&this.CallbackFilterString)?[{"Operand":6,"DataFieldName":this.DataTextField,"DataFieldValue":this.CallbackFilterString}]:[],"Tag":this.SoaRequestTag?this.SoaRequestTag:null};var _42=_4a.get_events().getHandler("beforeCallback");if(_42){_42(_4a,Sys.EventArgs.Empty);}var _53=eval(this.SoaService);_53["Select"](_52,SuccessCallback,FailureCallback);}else{var _54=document.getElementById(this.Id+"_CacheMap");if(_54){for(var i=_3d;i<_3d+_3e;i++){this.Data[i]=[];}this.RenderCacheMap(_54);}var url=this.UseClientUrlAsPrefix?(document.location.href+(document.location.href.indexOf("?")>0?"&":"?")+"Cart_"+this.Id+"_Callback=yes"):this.CallbackPrefix;url+="&Cart_"+this.Id+"_Callback_StartIndex="+_3d+"&Cart_"+this.Id+"_Callback_NumItems="+_3e;if(this.CallbackFilterString){url+="&Cart_"+this.Id+"_Callback_Filter="+encodeURIComponent(this.CallbackFilterString);}this.LoadedItemCount+=_3e;while(this.LoadedItemCount>this.CacheSize){this.UnloadStalePage();}this.Callback(url,_3d);}}};ComponentArt_ComboBox.prototype.Filter=function(_56){if(this.RunningMode==0){this.FilterString=_56.toLowerCase();this.RenderDropDown();return true;}else{if(_56&&this.CallbackFilterString&&_56.indexOf(this.CallbackFilterString)==0&&this.Data.length==this.ItemCount){this.FilterString=_56.toLowerCase();this.CallbackFilterString=_56;this.RenderDropDown();return true;}var _57=false;var _58=false;if(this.FilterCache){var _59=_56.toLowerCase();var _5a=this.CallbackFilterString?this.CallbackFilterString.toLowerCase():"";var _5b=[_5a,this.ItemCount,this.Data.concat()];for(var i=0;i<this.FilterCache.length;i++){if(this.FilterCache[i][0]==_59){_57=true;this.CallbackFilterString=_56;this.ItemCount=this.FilterCache[i][1];this.Data=this.FilterCache[i][2].concat();}if(this.FilterCache[i][0]==_5a){_58=true;}}if(_5b&&!_58){this.FilterCache=[_5b].concat(this.FilterCache);if(this.FilterCache.length>this.FilterCacheSize){this.FilterCache.length=this.FilterCacheSize;}}}this.FilterString=null;if(_57){this.RenderDropDown();return true;}else{this.Data.length=0;this.CallbackFilterString=_56;this.ShowReloading();this.Fetch(0,this.DropDownPageSize*2);return false;}}};ComponentArt_ComboBox.prototype.FindItemByProperty=function(_5d,_5e){for(var i=0;i<this.Data.length;i++){var _60=this.GetItem(i);if(_60.GetProperty(_5d)==_5e){return _60;}}return null;};ComponentArt_ComboBox.prototype.Focus=function(){var _61=document.getElementById(this.Id+"_Input");if(_61){try{_61.focus();}catch(ex){}}this.Focused=true;if(this.KeyboardShouldBeEnabled){this.KeyboardEnabled=true;}};ComponentArt_ComboBox.prototype.GetClientTemplate=function(sID){if(this.ClientTemplates){for(var i=0;i<this.ClientTemplates.length;i++){if(this.ClientTemplates[i][0]==sID){return this.ClientTemplates[i][1];}}}return null;};ComponentArt_ComboBox.prototype.GetItem=function(_64){if(this.Data.length>_64&&_64>=0){var _65=this.Data[_64];if(_65){var _66=new ComponentArt_ComboBoxItem(_65);for(var i=0;i<_65.length;i++){_66[_65[i][0]]=_65[i][1];}if(_66.Text==null){_66.Text="";}_66.ParentComboBox=this;_66.Index=_64;return _66;}else{return null;}}return null;};ComponentArt_ComboBox.prototype.GetSelectedItem=function(){if(this.SelectedIndex>=0){return this.GetItem(this.SelectedIndex);}return null;};ComponentArt_ComboBox.prototype.HandleBlur=function(e){if(this.CssClass&&this.FocusedCssClass&&this.element){this.element.className=this.CssClass;}if(this.TextBoxFocusedCssClass){if(this.TextBoxEnabled){var _69=document.getElementById(this.Id+"_Input");if(_69){_69.className=this.TextBoxCssClass;}}else{var _6a=document.getElementById(this.Id+"_TextBox");if(_6a){_6a.className=this.TextBoxCssClass;}}}this.Focused=false;if(this.KeyboardEnabled){this.KeyboardShouldBeEnabled=true;this.KeyboardEnabled=false;}if(this.Expanded){setTimeout(this.Id+".CollapseIfBlurred()",100);}};ComponentArt_ComboBox.prototype.HandleClick=function(e,o,_6d){ComponentArt_CancelEvent(e);this.SelectItemByIndex(_6d);this.Collapse();};ComponentArt_ComboBox.prototype.HandleDropClick=function(e,o){if(!this.Disabled){if(this.DropActiveImageUrl){o.src=this.DropActiveImageUrl;}this.ToggleExpand();setTimeout(this.Id+".Focus()",10);}return false;};ComponentArt_ComboBox.prototype.HandleDropMouseUp=function(e,o){if(this.DropActiveImageUrl){if(this.DropHoverImageUrl){e.src=this.DropHoverImageUrl;}else{e.src=this.DropImageUrl;}}};ComponentArt_ComboBox.prototype.HandleFocus=function(){this.EnsureDomElement();window._z137=this;if(this.FocusedCssClass&&this.element){this.element.className=this.FocusedCssClass;}if(this.TextBoxEnabled){var _72=document.getElementById(this.Id+"_Input");_72.select();}if(this.TextBoxFocusedCssClass){if(this.TextBoxEnabled){var _72=document.getElementById(this.Id+"_Input");if(_72){_72.className=this.TextBoxFocusedCssClass;}}else{var _73=document.getElementById(this.Id+"_TextBox");if(_73){_73.className=this.TextBoxFocusedCssClass;}}}this.Focused=true;if(this.KeyboardShouldBeEnabled){this.KeyboardEnabled=true;}};ComponentArt_ComboBox.prototype.HandleInputChange=function(_74){var _75=document.getElementById(this.Id+"_Input");this.InputValue=_75.value;var _76=_z114(_75);var _77=this.GetSelectedItem();if(this.AutoFilter){var _78=_75.value;_78=_78.substring(0,_76);if(this.RunningMode==1){if(_76>0&&_76<this.CallbackFilterMinimumLength){return;}this.Expand();clearTimeout(this.FilterTimeout);this.FilterTimeout=setTimeout("if("+this.Id+".Filter('"+_78.replace("'","\\'")+"')) {"+this.Id+".CompleteAndHighlight(); }",this.CallbackFilterDelay);return;}else{this.Filter(_78);this.Expand();}}if(this.AutoComplete||this.AutoHighlight){this.CompleteAndHighlight();}};ComponentArt_ComboBox.prototype.HandleInputMouseOut=function(e,o){if(this.TextBoxHoverCssClass){if(this.TextBoxEnabled){var _7b=document.getElementById(this.Id+"_Input");if(_7b){_7b.className=this.TextBoxCssClass;}}else{var _7c=document.getElementById(this.Id+"_TextBox");if(_7c){_7c.className=this.TextBoxCssClass;}}}if(this.DropHoverImageUrl){var _7d=document.getElementById(this.Id+"_DropImage");if(_7d){_7d.src=this.DropImageUrl;}}if(this.CssClass&&this.HoverCssClass&&this.element&&this.element.className.indexOf(" "+this.HoverCssClass)>0){this.element.className=this.CssClass;}};ComponentArt_ComboBox.prototype.HandleInputMouseOver=function(e,o){if(this.TextBoxHoverCssClass){if(this.TextBoxEnabled){var _80=document.getElementById(this.Id+"_Input");if(_80&&_80.className==this.TextBoxCssClass){_80.className+=" "+this.TextBoxHoverCssClass;}}else{var _81=document.getElementById(this.Id+"_TextBox");if(_81&&_81.className==this.TextBoxCssClass){_81.className+=" "+this.TextBoxHoverCssClass;}}}if(this.DropHoverImageUrl){var _82=document.getElementById(this.Id+"_DropImage");if(_82){_82.src=this.DropHoverImageUrl;}}if(this.CssClass&&this.HoverCssClass&&this.element&&this.element.className==this.CssClass){this.element.className+=" "+this.HoverCssClass;}};ComponentArt_ComboBox.prototype.HandleItemMouseOver=function(e,o,_85){try{if(ComponentArt_Contains(o,ComponentArt_FromElement(e))){return;}}catch(ex){}o.className+=" "+this.CssClasses[_85].Hover;};ComponentArt_ComboBox.prototype.HandleItemMouseOut=function(e,o,_88){try{if(ComponentArt_Contains(o,ComponentArt_ToElement(e))){return;}}catch(ex){}o.className=this.CssClasses[_88].Base;};ComponentArt_ComboBox.prototype.HandleKeyPress=function(e,o){var _8b=cart_browser_ie?e.keyCode:e.which;if(_8b==8){var _8c=_z114(o);var _8d=_z111(o);if(_8d>_8c){var _8e=_8c;if(_8e>1){o.value=o.value.substring(0,_8e-1);ComponentArt_SetSelectionRange(o,_8e-1,o.value.length);}else{o.value="";ComponentArt_SetSelectionRange(o,0,0);}ComponentArt_CancelEvent(e);}}else{if(_8b==13){if(this.AutoComplete||this.AutoHighlight){this.CompleteAndHighlight();}this.Collapse();ComponentArt_CancelEvent(e);return;}else{if(_8b==40){this.HandleScroll();return;}else{if(_8b==38){return;}else{if(_8b==9){return;}else{if(_8b==16||_8b==17||_8b==18||_8b==19||_8b==20){return;}}}}}}setTimeout(this.Id+".HandleInputChange()",1);};ComponentArt_ComboBox.prototype.HandleMouseDown=function(e,o){ComponentArt_CancelEvent(e);if(this.ResizeArea){_zE8=this;var _91=document.getElementById(this.Id+"_DropDown");var _92=cart_browser_ie?event.clientX+(document.documentElement&&document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft):e.pageX;var _93=cart_browser_ie?event.clientY+(document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop):e.pageY;_zE9=document.createElement("table");_zE9.cellSpacing=100;_zE9.style.position="absolute";_zE9.style.zIndex=100000;_zE9.style.left=(_92-100)+"px";_zE9.style.top=(_93-100)+"px";_zE9.style.cursor=this.DropDownResizingMode=="Corner"?"se-resize":"s-resize";_zE9.appendChild(document.createElement("tbody"));_zE9.firstChild.appendChild(document.createElement("tr"));_zE9.firstChild.firstChild.appendChild(document.createElement("td"));document.body.insertBefore(_zE9,document.body.firstChild);if(this.DropDownResizingStyle=="Outline"){_zEA=null;_zEB=document.createElement("div");_zEB.style.zIndex=90211;_zEB.style.border="1px solid #505050";_zEB.style.position="absolute";_zEB.style.top=_z87(_91)+"px";_zEB.style.left=_z86(_91)+"px";_zEB.style.height=ComponentArt_GetAdjustedHeight(_91)+"px";_zEB.style.width=ComponentArt_GetAdjustedWidth(_91)+"px";document.body.insertBefore(_zEB,document.body.firstChild);}else{_zEA=document.getElementById(this.Id+"_DropDownContent");_zEB=_91;}_zEC=cart_browser_ie?event.clientX+(document.documentElement&&document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft):e.pageX;_zED=cart_browser_ie?event.clientY+(document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop):e.pageY;this.Resizing=true;var _94=document.getElementById(this.Id+"_CacheMap");if(_94){_94.innerHTML="";}_zE9.onmousemove=_zE6;_zE9.onmouseup=_zE7;}setTimeout(this.Id+".Focus()",10);return false;};ComponentArt_ComboBox.prototype.HandleMouseMove=function(e,o){var _97=15;if(this.Resizing){return true;}else{var _98=cart_browser_ie?event.clientX+(document.documentElement&&document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft):e.pageX;var _99=cart_browser_ie?event.clientY+(document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop):e.pageY;var _9a=this.DropDownHeight;var _9b=this.DropDownWidth;if(this.DropDownResizingMode!="Off"){var _9c=document.getElementById(this.Id+"_DropDown");if(_9c){_9a=ComponentArt_GetAdjustedHeight(_9c);}}if(this.DropDownResizingMode=="Corner"){if(Math.abs(_98-(this.DropDownX+_9b))<_97&&Math.abs(_99-(this.DropDownY+_9a))<_97){this.ResizeArea=true;o.style.cursor="se-resize";}}else{if(this.DropDownResizingMode=="Bottom"){if(Math.abs(_99-(this.DropDownY+_9a))<_97){this.ResizeArea=true;o.style.cursor="s-resize";}}}}};ComponentArt_ComboBox.prototype.HandleMouseOut=function(e,o){this.ResizeArea=false;o.style.cursor="";};ComponentArt_ComboBox.prototype.HandleMouseUp=function(e,o){if(this.Scrolling){clearTimeout(this.FetchTimeout);this.HandleScrollFetch();}};ComponentArt_ComboBox.prototype.HandleScroll=function(){if(this.RunningMode!=1){return;}var o=document.getElementById(this.Id+"_DropDownContent");this.Scrolling=true;var _a2=Math.round((o.scrollTop*(this.ItemCount-1))/(o.scrollHeight-o.offsetHeight));clearTimeout(this.FetchTimeout);if(_a2>=0&&_a2<this.ItemCount){var _a3=Math.floor(_a2/this.DropDownPageSize);this.PageViews[_a3]=++this.PageViewOrder;this.ScrollIndex=_a2;this.FetchTimeout=setTimeout(this.Id+".HandleScrollFetch()",500);}};ComponentArt_ComboBox.prototype.HandleScrollFetch=function(){this.Scrolling=false;var _a4=0;for(var i=0;i<this.Data.length;i++){if(this.Data[i]!=null){_a4++;}}if(this.ItemCount<=_a4){return;}if(this.KeyboardIndex==0&&this.SelectedIndex!=0){this.ScrollIndex-=this.DropDownPageSize;}var _a6=this.ScrollIndex;var _a7=this.DropDownPageSize*2;var _a8=_a6-_a6%this.DropDownPageSize;var _a9=_a8+this.DropDownPageSize;if(!this.Data[_a6]||!this.Data[_a8]||!this.Data[_a9]){var _aa=!this.Data[_a6]?_a6:!this.Data[_a8]?_a8:_a9;var _ab=_aa;for(var i=0;i<_a7&&_ab>0;i++){if(this.Data[_ab-1]){break;}_ab--;}var _ac=_aa;for(var i=0;i<_a7&&_ac<this.ItemCount;i++){if(this.Data[_ac]){break;}_ac++;}this.Fetch(_ab,_ac-_ab);}};ComponentArt_ComboBox.prototype.HideOverlay=function(){if(this.OverlayElement){this.OverlayElement.style.display="none";}};ComponentArt_ComboBox.prototype.HideReloading=function(){if(this.CallbackProgressDomObj){this.CallbackProgressDomObj.style.display="none";}};ComponentArt_ComboBox.prototype.Initialize=function(){_z132(this);if(this.EnableViewState){ComponentArt_ClientStateControls[ComponentArt_ClientStateControls.length]=this;}this.element.style.visibility="";this.PageViews=[1];this.PageViewOrder=1;this.LoadedItemCount=this.Data.length;this.TextCache=[];this.CssClasses=[];if(this.AutoFilter){this.FilterCache=[];}var _ad=this.get_events().getHandler("init");if(_ad){_ad(this,Sys.EventArgs.Empty);}var _ae=document.getElementById(this.Id+"_Input");if(_ae){_ae.style.width="1px";_ae.style.visibility="hidden";_ae.style.display="";var _af=ComponentArt_GetAdjustedWidth(_ae.parentNode)+ComponentArt_GetAdjustedWidth(_ae,0);if(_af>10){_ae.style.width=_af+"px";}else{if(this.Width){_ae.style.width=this.Width+"px";}}_ae.style.visibility="";_ae.ComponentArtInput=true;_ae.autocomplete="off";_ae.onsubmit=ComponentArt_CancelEvent;}var _b0=document.createElement("div");_b0.style.position="absolute";document.body.insertBefore(_b0,document.body.firstChild);this.ContainerObj=_b0;this.Initialized=true;if(this.ClientRenderCondition){ComponentArt_WaitOnCondition(this.ClientRenderCondition,this.Id+".InitialRender()");}else{this.InitialRender();}if(this.SoaService){this.Fetch(0,this.DropDownPageSize);}else{if(this.EnableViewState){this.SaveData();}}};ComponentArt_ComboBox.prototype.InitialRender=function(){this.Render(true);if(!window.cart_combobox_donotplacedropdowninbody){var _b1=document.getElementById(this.Id+"_DropDown");if(_b1){_zF3(_b1);var _b2=document.forms.length>0?document.forms[0]:document.body;_b2.insertBefore(_b1,_b2.firstChild);}}var _b3=document.getElementById(this.Id+"_DropDownContent");if(_b3){var _b4=function(){arguments.callee.ComboBox.HandleScroll();};_b4.ComboBox=this;_b3.onscroll=_b4;var _b4=function(){arguments.callee.ComboBox.Focus();};_b4.ComboBox=this;_b3.onfocus=_b4;}if(!this.Enabled){this.Disable();}var _b5=this.get_events().getHandler("load");if(_b5){_b5(this,Sys.EventArgs.Empty);}if(this.KeyboardEnabled){this.KeyboardShouldBeEnabled=true;this.KeyboardEnabled=false;}this.Rendered=true;};ComponentArt_ComboBox.prototype.LoadItems=function(_b6,_b7){if(_b6.length>0){for(var i=0;i<_b6.length;i++){this.Data[_b7+i]=_b6[i];var _b9=Math.floor((_b7+i)/this.DropDownPageSize);this.PageViews[_b9]=++this.PageViewOrder;}}};ComponentArt_ComboBox.prototype.LoadParams=function(_ba){for(var _bb=0;_bb<_ba.length;_bb++){var _bc=_ba.item(_bb);var _bd=_bc.nodeName;var _be=_bc.firstChild?_bc.firstChild.nodeValue:null;this[_bd]=_be;}};ComponentArt_ComboBox.prototype.RemoveAll=function(){this.Data.length=0;this.ItemCount=0;this.LoadedItemCount=0;this.TextCache.length=0;this.CssClasses.length=0;};ComponentArt_ComboBox.prototype.RemoveItemAt=function(_bf){if(_bf>=0&&_bf<this.Data.length){this.Data=this.Data.slice(0,_bf).concat(this.Data.slice(_bf+1));this.ItemCount--;this.LoadedItemCount--;this.TextCache.length=0;this.CssClasses.length=0;}};ComponentArt_ComboBox.prototype.Render=function(_c0){this.element=this.DomElement=document.getElementById(this.DomElementId);if(this.element){this.element.className=this.CssClass;}if(this.TextBoxClientTemplateId){var _c1=document.getElementById(this.Id+"_TextBox");if(_c1){var _c2=this.GetClientTemplate(this.TextBoxClientTemplateId);if(_c2){var _c3=ComponentArt_InstantiateClientTemplate(_c2,this,this.GetSelectedItem());if(_c3){var _c4="#$InputBox";if(_c3.indexOf(_c4)>=0){var _c5=document.getElementById(this.Id+"_Input");if(_c5){if(this.InputBox){this.RestoreInputBox();}var _c6="<div id=\""+this.Id+"_InputBoxPlaceHolder\" style=\"overflow:hidden;height:"+_c5.offsetHeight+"px;width:"+_c5.offsetWidth+"px;\">&nbsp;</div>";_c3=_c3.replace(_c4,_c6);var _c7=document.createElement("div");_c7.innerHTML=_c6;this.ContainerObj.appendChild(_c5.parentNode.replaceChild(_c7,_c5));this.InputBox=_c5;}}_c1.innerHTML=_c3;if(this.InputBox){clearTimeout(this.RestoreInputBoxTimeout);this.RestoreInputBoxTimeout=setTimeout(this.Id+".RestoreInputBox()",0);}}}}}else{if(this.TextBoxEnabled){var _c5=document.getElementById(this.Id+"_Input");if(_c5){_c5.className=this.TextBoxCssClass;}}else{var _c1=document.getElementById(this.Id+"_TextBox");if(_c1){_c1.className=this.TextBoxCssClass;}}}var _c8=document.getElementById(this.Id+"_CacheMap");if(_c8){this.RenderCacheMap(_c8);}if(_c0){this.RenderDropDown();}};ComponentArt_ComboBox.prototype.RenderCacheMap=function(_c9){var _ca=["<table width=\""+this.CacheMapWidth+"\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">"];for(var i=0;i<_c9.offsetHeight;i++){var _cc=this.Data[Math.round((i*this.ItemCount)/_c9.offsetHeight)];var _cd=_cc?(_cc.length==0?this.CacheMapLoadingColor:this.CacheMapLoadedColor):this.CacheMapNotLoadedColor;_ca[_ca.length]="<tr><td height=\"1\" bgcolor=\""+_cd+"\"></td></tr>";}_ca[_ca.length]="</table>";_c9.innerHTML=_ca.join("");};ComponentArt_ComboBox.prototype.RenderDropDown=function(){if(this.HasDropDownContent){return;}var _ce=document.getElementById(this.Id+"_DropDownContent");if(_ce){var _cf=0;var _d0=[];for(var i=0;i<this.ItemCount;i++){var _d2=i<this.Data.length?this.GetItem(i):null;if(_d2){this.TextCache[i]=_d2.Text;if(!this.FilterString||(this.FilterString&&this.TextCache[i].toLowerCase().indexOf(this.FilterString)==0)){if(_cf>0){this.RenderMissingItems(_d0,_cf);_cf=0;}this.RenderItem(_d2,_d0);}}else{_cf++;}}if(_cf>0){this.RenderMissingItems(_d0,_cf);_cf=0;}_ce.innerHTML=_d0.join("");}};ComponentArt_ComboBox.prototype.RenderItem=function(_d3,_d4){var _d5=_d3.CssClass?_d3.CssClass:this.ItemCssClass;if(!_d3.Enabled&&this.DisabledItemCssClass){_d5+=" "+this.DisabledItemCssClass;}if(this.SelectedItemCssClass&&_d3.Index==this.SelectedIndex){_d5+=" "+this.SelectedItemCssClass;}var _d6=this.SelectedItemHoverCssClass&&_d3.Index==this.SelectedIndex?this.SelectedItemHoverCssClass:this.ItemHoverCssClass;this.CssClasses[_d3.Index]={"Base":_d5,"Hover":_d6};_d4[_d4.length]="<div style=\"white-space: nowrap;\" id=\""+this.Id+"_item_"+_d3.Index+"\"";if(_d5){_d4[_d4.length]=" class=\""+_d5+"\"";}if(_d3.Enabled){if(_d6){_d4[_d4.length]=" onmouseover=\""+this.Id+".HandleItemMouseOver(event,this, "+_d3.Index+");\"";_d4[_d4.length]=" onmouseout=\""+this.Id+".HandleItemMouseOut(event,this, "+_d3.Index+");\"";}_d4[_d4.length]=" onclick=\""+this.Id+".HandleClick(event,this,"+_d3.Index+")\"";}_d4[_d4.length]=" onmousedown=\"ComponentArt_CancelEvent(event)\"><nobr>";var _d7=_d3.ClientTemplateId?_d3.ClientTemplateId:this.ItemClientTemplateId;if(_d7){var _d8=this.GetClientTemplate(_d7);if(_d8){var _d9=ComponentArt_InstantiateClientTemplate(_d8,this,_d3);if(_d9){_d4[_d4.length]=_d9;}}}else{_d4[_d4.length]=_d3.Text;}_d4[_d4.length]="</nobr></div>";};ComponentArt_ComboBox.prototype.RenderMissingItem=function(_da){_da[_da.length]="<div style=\"visibility:hidden;overflow:hidden;\" class=\""+this.ItemCssClass+"\">&nbsp;</div>";};ComponentArt_ComboBox.prototype.RenderMissingItems=function(_db,_dc){_db[_db.length]="<div style=\"visibility:hidden;overflow:hidden;height:"+(_dc*this.ItemHeight)+"px;\">&nbsp;</div>";};ComponentArt_ComboBox.prototype.RestoreInputBox=function(){if(this.InputBox){var _dd=document.getElementById(this.Id+"_InputBoxPlaceHolder");if(_dd){_dd.parentNode.replaceChild(this.InputBox,_dd);this.InputBox.focus();this.InputBox=null;}else{clearTimeout(this.RestoreInputBoxTimeout);this.RestoreInputBoxTimeout=setTimeout(this.Id+".RestoreInputBox()",10);}}};ComponentArt_ComboBox.prototype.SaveData=function(){var _de=document.getElementById(this.Id+"_Data");if(_de){_de.value=ComponentArt_ArrayToXml(this.Data,true);}};ComponentArt_ComboBox.prototype.ScrollIntoView=function(_df){var _e0=document.getElementById(this.Id+"_item_"+_df);var _e1=document.getElementById(this.Id+"_DropDownContent");if(_e0){if(_e0.offsetTop+_e0.offsetHeight>_e1.scrollTop+_e1.offsetHeight||_e0.offsetTop<_e1.scrollTop){_e1.scrollTop=_e0.offsetTop;}}};ComponentArt_ComboBox.prototype.SelectItem=function(_e2,_e3){if(!_e2.Enabled){return;}var _e4=_e2.Index;if(_e4==this.SelectedIndex){return;}if(!_e3){var _e5=this.get_events().getHandler("beforeChange");if(_e5){var _e6=new Sys.CancelEventArgs();_e5(this,_e6);if(_e6.get_cancel()){return;}}}if(this.SelectedItemCssClass){if(this.SelectedIndex>=0){var _e7=this.GetItem(this.SelectedIndex);if(_e7){var _e8=_e7.CssClass?_e7.CssClass:this.ItemCssClass;if(this.CssClasses[this.SelectedIndex]){this.CssClasses[this.SelectedIndex].Base=_e8;if(this.ItemHoverCssClass){this.CssClasses[this.SelectedIndex].Hover=_e8+" "+this.ItemHoverCssClass;}}var _e9=document.getElementById(this.Id+"_item_"+this.SelectedIndex);if(_e9){_e9.className=_e8;}}}if(this.CssClasses[_e4]){this.CssClasses[_e4].Base+=" "+this.SelectedItemCssClass;if(this.SelectedHoverCssClass){this.CssClasses[_e4].Hover+=" "+this.SelectedHoverCssClass;}var _ea=document.getElementById(this.Id+"_item_"+_e4);if(_ea){_ea.className=this.CssClasses[_e4].Base;}}}this._oldSelectedIndex=this.SelectedIndex;this.SelectedIndex=_e4;var _eb=document.getElementById(this.Id+"_SelectedIndex");if(_eb){_eb.value=_e4;}var _ec=document.getElementById(this.Id+"_SelectedText");if(_ec){_ec.value=_e2.Text;}var _ed=document.getElementById(this.Id+"_SelectedValue");if(_ed){_ed.value=_e2.Value;}var _ee=document.getElementById(this.Id+"_Input");if(_ee){_ee.value=_e2.Text;}this.Render();this.ScrollIntoView(_e4);if(!_e3){var _e5=this.get_events().getHandler("change");if(_e5){_e5(this,Sys.EventArgs.Empty);}}};ComponentArt_ComboBox.prototype.SelectItemByIndex=function(_ef){var _f0=this.GetItem(_ef);if(_f0){this.SelectItem(_f0);}};ComponentArt_ComboBox.prototype.ShowOverlay=function(){if(!cart_browser_ie){return;}var _f1=document.getElementById(this.Id+"_DropDown");if(!this.OverlayElement){var _f2=document.createElement("iframe");_f2.src="javascript:false";_f2.style.position="absolute";if(cart_browser_ie){_f2.style.filter="progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)";}else{_f2.style.opacity=0;_f2.style.setProperty("-moz-opacity",0,"");}_f1.parentNode.insertBefore(_f2,_f1);this.OverlayElement=_f2;}this.OverlayElement.style.top=_f1.style.top;this.OverlayElement.style.left=_f1.style.left;this.OverlayElement.style.width=_f1.offsetWidth+"px";this.OverlayElement.style.height=_f1.offsetHeight+"px";this.OverlayElement.style.display="";};ComponentArt_ComboBox.prototype.ShowReloading=function(){var _f3=document.getElementById(this.Id+"_DropDownContent");_f3.innerHTML="";if(!this.Expanded){return;}if(!this.CallbackProgressDomObj){this.CallbackProgressDomObj=document.createElement("div");this.CallbackProgressDomObj.style.position="absolute";this.CallbackProgressDomObj.style.display="none";this.CallbackProgressDomObj.style.textAlign="center";if(this.LoadingClientTemplateId){var _f4=this.GetClientTemplate(this.LoadingClientTemplateId);if(_f4){var _f5=ComponentArt_InstantiateClientTemplate(_f4,this,null);if(_f5){this.CallbackProgressDomObj.innerHTML=_f5;}}}else{this.CallbackProgressDomObj.innerHTML=this.LoadingText;}document.body.insertBefore(this.CallbackProgressDomObj,document.body.firstChild);}var _f3=document.getElementById(this.Id+"_DropDownContent");if(_f3){this.CallbackProgressDomObj.style.top=_z87(_f3)+"px";this.CallbackProgressDomObj.style.left=_z86(_f3)+"px";this.CallbackProgressDomObj.style.width=ComponentArt_GetAdjustedWidth(_f3)+"px";this.CallbackProgressDomObj.style.height=ComponentArt_GetAdjustedHeight(_f3)+"px";this.CallbackProgressDomObj.style.zIndex=_f3.style.zIndex+1;this.CallbackProgressDomObj.style.display="";}};ComponentArt_ComboBox.prototype.ToggleExpand=function(){if(this.Expanded){this.Collapse();}else{this.Expand();}};ComponentArt_ComboBox.prototype.UnloadStalePage=function(){var _f6=this.PageViews.slice().sort(function(a,b){return (!a?1:!b?-1:a-b);});var _f9=_f6[0];for(var i=0;i<this.PageViews.length;i++){if(this.PageViews[i]==_f9){this.PageViews[i]=null;var _fb=i*this.DropDownPageSize;var _fc=_fb+this.DropDownPageSize;for(var j=_fb;j<_fc;j++){this.Data[j]=null;}this.LoadedItemCount-=(_fc-_fb);break;}}};ComponentArt_ComboBox.prototype.UnSelect=function(){if(this.SelectedItemCssClass){if(this.SelectedIndex>=0){var _fe=this.GetItem(this.SelectedIndex);if(_fe){var _ff=_fe.CssClass?_fe.CssClass:this.ItemCssClass;this.CssClasses[this.SelectedIndex].Base=_ff;if(this.ItemHoverCssClass){this.CssClasses[this.SelectedIndex].Hover=_ff+" "+this.ItemHoverCssClass;}var _100=document.getElementById(this.Id+"_item_"+this.SelectedIndex);if(_100){_100.className=_ff;}}}}this.SelectedIndex=-1;var _101=document.getElementById(this.Id+"_SelectedIndex");if(_101){_101.value=-1;}var _102=document.getElementById(this.Id+"_SelectedText");if(_102){_102.value="";}var _103=document.getElementById(this.Id+"_SelectedValue");if(_103){_103.value="";}this.Render();this.ScrollIntoView(0);var _104=this.get_events().getHandler("change");if(_104){_104(this,Sys.EventArgs.Empty);}};window.ComponentArt_ComboBox_Kernel_Loaded=true;}